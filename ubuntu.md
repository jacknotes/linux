#Ubuntu
<pre>
#网络和DNS配置
jack@ubuntu:/etc/apt$ uname -a 
Linux ubuntu 5.4.0-80-generic #90-Ubuntu SMP Fri Jul 9 22:49:44 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux
jack@ubuntu:/etc/apt$ cat /etc/issue
Ubuntu 20.04.2 LTS \n \l

#ubuntu网络
从ubuntu17.10开始，网络默认由netplan进行管理，yaml格式，文档见/usr/share/doc/netplan/netplan.html
配置好/etc/netplan/00-installer-config.yaml后执行sudo netplan apply 进行应用，实际操作的是由systemd-networkd.service和systemd-resolved.service进行管理，此两个服务也必须开机自启才行，也可以由NetworkManager.service这一个服务统一管理。
默认不自带NetworkManager，需要先安装sudo apt install -y network-manager
#--网络更换方式
[jack@ubuntu:~]$ sudo systemctl stop systemd-networkd
[jack@ubuntu:~]$ sudo systemctl disable systemd-networkd
[jack@ubuntu:~]$ vim /etc/netplan/00-installer-config.yaml
  renderer: NetworkManager   --更换纳管方式为NetworkManager 
[jack@ubuntu:~]$ /etc/apt$ sudo netplan apply 
#--DNS更换方式
[jack@ubuntu:~]$ sudo systemctl stop systemd-resolved
[jack@ubuntu:~]$ sudo systemctl disable systemd-resolved
[jack@ubuntu:~]$ sudo cat /etc/NetworkManager/NetworkManager.conf 
[main]
dns=default   --在main下面增加此行
[jack@ubuntu:~]$ sudo mv /etc/resolv.conf /tmp/
[jack@ubuntu:~]$ sudo systemctl restart NetworkManager
[jack@ubuntu:~]$ sudo cat /etc/resolv.conf 
# Generated by NetworkManager
search hs.com
nameserver 192.168.10.250
nameserver 192.168.10.110
[jack@ubuntu:~]$ sudo systemctl enable NetworkManager
注：以上实行更换网络和DNS配置，从而实现了使用NetworkManager一个服务进行管理ubuntu网络

#netplan配置例子：
jack@ubuntu:/etc/apt$ sudo cat /etc/netplan/00-installer-config.yaml 
---
# This is the network config written by 'subiquity'
network:
  version: 2
  renderer: NetworkManager   #或者renderer: networkd，默认为networkd，需要事先安装NetworkManager
  ethernets:
    ens33:
      dhcp4: false
      optional: true    #如果一个设备被标记为可选，networkd 将不会等待它。这个只有networkd支持，默认是false
      addresses:
      - 172.168.2.224/24
      gateway4: 172.168.2.254
      nameservers:
        search: 
        - hs.com
        addresses:
        - 192.168.10.250
        - 192.168.10.110
      routes:   #--设置路由
      - to: 0.0.0.0/0
        via: 10.0.0.1
        metric: 100
      - to: 0.0.0.0/0
        via: 11.0.0.1
        metric: 100
-----生产配置--------
[jack@ubuntu:~]$ cat /etc/netplan/00-installer-config.yaml 
# This is the network config written by 'subiquity'
network:
  version: 2
  ethernets:
    ens33:
      dhcp4: false
      addresses:
      - 172.168.2.224/24
      gateway4: 172.168.2.254
      nameservers:
        search: 
        - hs.com
        addresses:
        - 192.168.10.250
        - 192.168.10.110
---
jack@ubuntu:/etc/apt$ sudo netplan apply 
[jack@ubuntu:~]$ sudo resolvectl status ens33   --此命令依赖systemd-resolved.service服务
Link 2 (ens33)
      Current Scopes: DNS           
DefaultRoute setting: yes           
       LLMNR setting: yes           
MulticastDNS setting: no            
  DNSOverTLS setting: no            
      DNSSEC setting: no            
    DNSSEC supported: no            
  Current DNS Server: 192.168.10.250
         DNS Servers: 192.168.10.250
                      192.168.10.110
          DNS Domain: hs.com        



#apt源设置
jack@ubuntu:/etc/apt$ sudo cat /etc/apt/sources.list
---
deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
---
#更新apt源
jack@ubuntu:/etc/apt$ sudo apt update
#更新apt已安装的包
jack@ubuntu:/etc/apt$ sudo apt upgrade

#dpkg命令
sudo dpkg -i    等于     sudo rpm -i 
sudo dpkg -r    等于     sudo rpm -e		卸载
sudo dpkg -P    等于     sudo rpm -e		卸载并删除配置文件
sudo dpkg -s openssh-server    等于     rpm -q --info openssh-server
sudo dpkg -L openssh-server    等于     sudo rpm -ql openssh-server
sudo dpkg -l    等于     sudo rpm -qa 
sudo dpkg -S /usr/sbin/sshd 或者 dpkg -S netstat   等于     sudo rpm -qf /usr/sbin/sshd 

#apt命令
sudo apt search net-tools	等于		sudo yum search net-tools
sudo apt list | grep openssh	等于		sudo yum list net-tools, sudo yum list | grep net-tools
sudo apt show net-tools		等于		sudo yum info net-tools
sudo apt install net-tools 	等于		sudo yum install net-tools -y
sudo apt remove --purge net-tools 	等于		sudo yum remove net-tools -y  卸载并删除配置文件
sudo apt update		等于		sudo yum mamkecache fast    更新包信息
sudo apt upgrade net-tools	等于	sudo yum update net-tools
sudo apt-get dist-upgrade  等于	sudo yum update   升级系统
sudo apt-get clean && sudo apt-get autoclean 清理无用的包  |   sudo yum clean all   清理缓存 
sudo apt-get source net-tools   下载原代码包
sudo apt-get check 检查是否有损坏的依赖
#安装apt相关命令apt-file
sudo apt install apt-file -y
sudo apt-file update   --更新apt-file命令所需的信息
sudo apt-file search /bin/netstat   --查看此文件属于哪个软件包
#apt-cache 
sudo apt-cache madison kubectl   --查看包历史版本
sudo apt install kubectl=1.19.10-00  --安装指定版本包

#--apt update报证书问题解决办法
问题：
jack@ubuntu:/tmp/test$ sudo apt update 
  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY FEEA9169307EA071 NO_PUBKEY 8B57C5C2836F4BEB
解决：
jack@ubuntu:/tmp/test$ sudo gpg --keyserver keyserver.ubuntu.com --recv 8B57C5C2836F4BEB
jack@ubuntu:/tmp/test$ sudo gpg --export --armor 8B57C5C2836F4BEB | sudo apt-key add -
其余相关命令：
--查看gpg key
sudo gpg -k 
--删除gpg key，指定gpg key ID
sudo gpg --delete-keys 59FE0256827269DC81578F928B57C5C2836F4BEB
--列出apt-key列表
sudo apt-key list
--删除apt-key 
sudo apt-key del 59FE0256827269DC81578F928B57C5C2836F4BEB



</pre>