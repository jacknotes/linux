webpackJsonp([39],{"Y/in":function(t,e){},y1v5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("BO1k"),r=i.n(a),s=i("Dd8w"),n=i.n(s),o=i("mvHQ"),l=i.n(o),d=i("CCVD"),c=i("RxQk"),u=i("C0NF"),h=i("9Vmw"),v=i("4aFc"),m=i("EqUB"),D=i("l4ZZ"),p=i("gSa9"),g=i("bJna"),T=i("NYxO"),C=i("gyMJ"),_=i("Zrlr"),f=i.n(_),w=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f()(this,t),this.DepartureDateTime=e.DepartureDateTime?e.DepartureDateTime:0,this.DepartStationCode=e.DepartStationCode?e.DepartStationCode:"",this.DepartStationName=e.DepartStationName?e.DepartStationName:"",this.ArrivalDateTime=e.ArrivalDateTime?e.ArrivalDateTime:0,this.ArrivalStationCode=e.ArrivalStationCode?e.ArrivalStationCode:"",this.ArrivalStationName=e.ArrivalStationName?e.ArrivalStationName:"",this.TrainNo=e.TrainNo?e.TrainNo:"",this.TrainCode=e.TrainCode?e.TrainCode:"",this.RunTime=e.RunTime?e.RunTime:"",this.RunTimeMinute=e.RunTimeMinute?e.RunTimeMinute:"",this.StartStationName=e.StartStationName?e.StartStationName:"",this.EndStationName=e.EndStationName?e.EndStationName:"",this.TrainCategory=e.TrainCategory?e.TrainCategory:"",this.ArrivalDays=e.ArrivalDays?e.ArrivalDays:0,this.Count=i.Count?i.Count:0,this.Price=i.Price?i.Price:0,this.TypeCode=i.TypeCode?i.TypeCode:"",this.TypeName=i.TypeName?i.TypeName:"",this.ChooseSeats=""},b={beforeRouteEnter:function(t,e,i){i(function(t){"/"===e.path?t.$router.replace("/home"):"/train/query"===e.path?(t.details={Routes:[],Filters:[]},t._getTrainRight(),t._getDetailsList()):"/train/orderDetail"===e.path||"/train/change"===e.path?t._getDatalistWithChange():t.details=JSON.parse(l()(t.details))})},beforeRouteLeave:function(t,e,i){this.showTableTime?(this.showTableTime=!1,i(!1)):this.showSeatDetails||this.showDatePicker||this.showTravelStandard?(this.showSeatDetails=!1,this.extendRoute={},this.showDatePicker=!1,this.showTravelStandard=!1,i(!1)):i()},computed:n()({},Object(T.c)(["trainOrder"]),{isOneWay:function(){return""+this.$route.query.isOneWay=="true"},isGoRoute:function(){return this.noValue(this.trainOrder.GoSelectedRoute.TrainCode)},isBackRoute:function(){return this.noValue(this.trainOrder.BackSelectedRoute.TrainCode)},isCurrentDate:function(){return this.isGoRoute||this.isOneWay?this.trainOrder.DepartDate:this.trainOrder.ArrivalDate},isCanFirstDate:function(){return this.isGoRoute||this.isOneWay?this.beTime(new Date)===this.isCurrentDate:this.trainOrder.DepartDate===this.isCurrentDate},isCanLastDate:function(){return this.beTime((new Date).setDate((new Date).getDate()+this.trainRight.CanBookDays))===this.isCurrentDate},isConditionsTime:function(){return this.isGoRoute||this.isOneWay?0:this.trainOrder.GoSelectedRoute.ArrivalDateTime},routeCount:function(){return this.details.Routes?this.details.Routes.length:0},isTravelType:function(){return 0===Number(this.trainOrder.TravelType)?this.$t("base.Business"):this.$t("base.Personal")},isTitle:function(){return this.isGoRoute||this.isOneWay?this.trainOrder.DepartObject["CityName_"+this.language]+"-"+this.trainOrder.ArrivalObject["CityName_"+this.language]+"("+this.isTravelType+")":this.trainOrder.ArrivalObject["CityName_"+this.language]+"-"+this.trainOrder.DepartObject["CityName_"+this.language]+"("+this.isTravelType+")"},isHaveFilters:function(){if(this.noValue(this.details.Filters))return!1;var t=!0,e=!1,i=void 0;try{for(var a,s=r()(this.details.Filters);!(t=(a=s.next()).done);t=!0){var n=a.value,o=!0,l=!1,d=void 0;try{for(var c,u=r()(n.Items);!(o=(c=u.next()).done);o=!0){if(c.value.select)return!0}}catch(t){l=!0,d=t}finally{try{!o&&u.return&&u.return()}finally{if(l)throw d}}}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}return!1},originalDetails:function(){return JSON.parse(this.$route.query.originalDetails)}}),watch:{condition:{handler:function(t){void 0!==t.depate?this.details.Routes.sort(function(e,i){return t.depate?e.DepartureDateTime-i.DepartureDateTime:i.DepartureDateTime-e.DepartureDateTime}):void 0!==t.arrive?this.details.Routes.sort(function(e,i){return t.arrive?e.ArrivalDateTime-i.ArrivalDateTime:i.ArrivalDateTime-e.ArrivalDateTime}):void 0!==t.time&&this.details.Routes.sort(function(e,i){return t.time?Number(e.RunTimeMinute)-Number(i.RunTimeMinute):Number(i.RunTimeMinute)-Number(e.RunTimeMinute)})},deep:!0}},data:function(){return{showFilter:!1,showSeatDetails:!1,showTableTime:!1,showDatePicker:!1,showTravelStandard:!1,details:{Routes:[],Filters:[]},extendRoute:{},currentTableTime:{},tableViewOptions:{pullDownRefresh:{threshold:50}},condition:{depate:void 0,arrive:void 0,time:void 0},trainRight:{},showWhereBack:!1}},methods:n()({},Object(T.d)(["SET_TRAIN_ORDER","SET_TRAIN_CHANGE"]),{_getTrainRight:function(){var t=this;Object(C._32)().then(function(e){t.trainRight=e.ResultData})},_bookRoute:function(t,e){var i=JSON.parse(l()(this.trainOrder));this.isOneWay||this.isGoRoute?(i.GoSelectedRoute=new w(t,e),this.SET_TRAIN_ORDER(i),this.showSeatDetails=!1,this.extendRoute={},this.trainOrder.OriginalOrderID?this.$router.push({path:"/train/change",query:{originalDetails:l()(this.originalDetails)}}):this.isOneWay?this.$router.push("/train/book"):this._getDetailsList()):(i.BackSelectedRoute=new w(t,e),this.SET_TRAIN_ORDER(i),this.showSeatDetails=!1,this.extendRoute={},this.$router.push("/train/book"))},_clickExtend:function(t,e){this.extendRoute=JSON.parse(l()(t)),this.$set(this.extendRoute,"startTop",e),this.showSeatDetails=!0},_clickTableTime:function(t){this.currentTableTime={DepartStationCode:t.DepartStationCode,DepartStationName:t.DepartStationName,ArrivalStationCode:t.ArrivalStationCode,ArrivalStationName:t.ArrivalStationName,DepartDate:t.DepartureDateTime,TrainNo:t.TrainNo,TrainCode:t.TrainCode},this.showTableTime=!0},_scrollStart:function(){this.$refs.footer&&(this.$refs.footer.style.bottom="-50px")},_touchEnd:function(){this.$refs.footer&&(this.$refs.footer.style.bottom="0px")},_confirmFliter:function(t){this.details.Filters=t},_setChangeDate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isCurrentDate,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=this.beTime(new Date(t).setDate(new Date(t).getDate()+e));var i=JSON.parse(l()(this.trainOrder));this.isOneWay||this.isGoRoute?(i.DepartDate=t,new Date(t).getTime()>new Date(this.trainOrder.ArrivalDate).getTime()&&(i.ArrivalDate=this.beTime(new Date(t).setDate(new Date(t).getDate()+1)))):i.ArrivalDate=t,this.SET_TRAIN_ORDER(i),this._getDetailsList()},_getDetailsList:function(){var t=this;this.details={Routes:[],Filters:[]};var e=this.isOneWay||this.isGoRoute?{DepartStationCode:this.trainOrder.DepartStationCode,ArrivalStationCode:this.trainOrder.ArrivalStationCode,DepartDate:new Date(this.trainOrder.DepartDate).getTime()/1e3,IsOnlyHighSpeed:this.trainOrder.isHighSpeed}:{DepartStationCode:this.trainOrder.ArrivalStationCode,ArrivalStationCode:this.trainOrder.DepartStationCode,DepartDate:new Date(this.trainOrder.ArrivalDate).getTime()/1e3,IsOnlyHighSpeed:this.trainOrder.isHighSpeed};Object(C._35)(e).then(function(e){t.details=e.ResultData,t.details.Filters.forEach(function(e,i){e.Items.forEach(function(e,i){t.$set(e,"select",!1)})})}).catch(function(){t.$refs.tableView.forceUpdate()})},_getDatalistWithChange:function(){this._getDetailsList()},_setAddressWhereBack:function(t){var e=n()({},this.trainOrder);e.ArrivalObject=t,e.ArrivalStationCode=t.CityCode,e.ArrivalStationName=t["CityName_"+this.language],this.SET_TRAIN_ORDER(e),this._getDetailsList()}}),components:{CHeader:d.a,HsAddressPicker:c.a,HsScroll:u.a,HsSection:h.a,HsCell1:v.a,HsNull:m.a,HsDialog:g.a,HsDatePicker:D.a,CTravelStandard:p.a,InforCell:function(){return i.e(72).then(i.bind(null,"i0Ev"))},QueryListDetails:function(){return i.e(73).then(i.bind(null,"ndAc"))},HsFilterTrain:function(){return i.e(74).then(i.bind(null,"yp+M"))},CTableTime:function(){return i.e(69).then(i.bind(null,"fnlI"))}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hs-container"},[i("c-header",{attrs:{isBackNav:""}},[i("div",{staticClass:"header-title",attrs:{slot:"middle"},slot:"middle"},[i("h2",[t._v(t._s(t.isTitle))]),t._v(" "),t.routeCount>0?i("p",[t._v(t._s(t.$t("base.XTrips","function",t.routeCount)))]):t._e()]),t._v(" "),i("div",{staticClass:"standard",attrs:{slot:"right"},slot:"right"},[t.trainOrder.OriginalOrderID||0!==Number(t.trainOrder.TravelType)?t.originalDetails.CanChangeStation?i("p",{on:{click:function(e){t.showWhereBack=!0}}},[t._v("变更到站")]):t._e():i("p",{on:{click:function(e){t.showTravelStandard=!0}}},[t._v(t._s(t.$t("base.Policy")))])])]),t._v(" "),i("div",{ref:"select-data-fixed",staticClass:"select-data-container"},[i("div",{staticClass:"left-day",on:{click:function(e){!t.isCanFirstDate&&t._setChangeDate(t.isCurrentDate,-1)}}},[i("span",{class:{gray:t.isCanFirstDate}},[t._v(t._s(t.$t("base.Yesterday")))])]),t._v(" "),i("div",{staticClass:"middle-day",on:{click:function(e){t.showDatePicker=!0}}},[i("p",[t._v(t._s(t.beTime(new Date(t.isCurrentDate).getTime(),"MM月dd日")+"  "+t.getWeeks(t.isCurrentDate))+" ")]),t._v(" "),i("p",{staticClass:"linear"}),t._v(" "),i("img",{attrs:{src:"static/image/train/calendar.png"}})]),t._v(" "),i("div",{staticClass:"right-day",on:{click:function(e){!t.isCanLastDate&&t._setChangeDate(t.isCurrentDate,1)}}},[i("span",{class:{gray:t.isCanLastDate}},[t._v(t._s(t.$t("base.Tomorrow_2")))])])]),t._v(" "),i("hs-scroll",{ref:"tableView",staticClass:"table-view",attrs:{data:t.details.Routes,isListenScroll:!0,options:t.tableViewOptions},on:{scrollStart:t._scrollStart,touchEnd:t._touchEnd,"pulling-down":t._getDetailsList}},[i("div",{style:{height:"50px",width:"100%"}}),t._v(" "),i("hs-null",{directives:[{name:"show",rawName:"v-show",value:0===t.routeCount,expression:"routeCount === 0"}]}),t._v(" "),i("hs-section",{directives:[{name:"show",rawName:"v-show",value:t.routeCount>0,expression:"routeCount > 0"}]},t._l(t.details.Routes,function(e,a){return i("infor-cell",{key:a,attrs:{currentRoute:e,conditionsTime:t.isConditionsTime,filters:t.details.Filters},on:{delegateForExtend:t._clickExtend,delegateForTableTime:t._clickTableTime}})})),t._v(" "),i("div",{style:{height:"55px",width:"100%"}})],1),t._v(" "),i("div",{ref:"footer",staticClass:"footer"},[i("div",{staticClass:"item",on:{click:function(e){t.condition.depate=!t.condition.depate,t.condition.arrive=void 0,t.condition.time=void 0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.condition.depate,expression:"condition.depate === undefined"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/train/depate.png')"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.condition.depate,expression:"condition.depate === true"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/down.png')"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.condition.depate,expression:"condition.depate === false"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/up.png')"}}),t._v(" "),i("p",[t._v(t._s(""+(void 0===t.condition.depate?t.$t("base.Departure"):!0===t.condition.depate?t.$t("base.DepartureEarliest_2"):t.$t("base.DepartureLatest_2"))))])]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){t.condition.depate=void 0,t.condition.arrive=!t.condition.arrive,t.condition.time=void 0}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.condition.arrive,expression:"condition.arrive === undefined"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/train/arrive.png')"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.condition.arrive,expression:"condition.arrive === true"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/down.png')"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.condition.arrive,expression:"condition.arrive === false"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/up.png')"}}),t._v(" "),i("p",[t._v(t._s(""+(void 0===t.condition.arrive?t.$t("base.Arrival"):!0===t.condition.arrive?t.$t("base.ArrivalEarliest"):t.$t("base.ArrivalLatest"))))])]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){t.condition.depate=void 0,t.condition.arrive=void 0,t.condition.time=!t.condition.time}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.condition.time,expression:"condition.time === undefined"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/train/time.png')"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.condition.time,expression:"condition.time === true"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/down.png')"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.condition.time,expression:"condition.time === false"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/up.png')"}}),t._v(" "),i("p",[t._v(t._s(""+(void 0===t.condition.time?t.$t("base.TimeConsuming"):!0===t.condition.time?t.$t("base.TimeConsumingLeast"):t.$t("base.TimeConsumingMost"))))])]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){t.showFilter=!0}}},[i("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/screen.png')"}},[i("div",{class:{dot:t.isHaveFilters}})]),t._v(" "),i("p",[t._v(t._s(t.$t("base.Filters")))])])]),t._v(" "),t.showSeatDetails?i("query-list-details",{attrs:{extendRoute:t.extendRoute,title:t.isTitle},on:{delegateBook:t._bookRoute,delegateForTableTime:t._clickTableTime}}):t._e(),t._v(" "),t.showTableTime?i("c-table-time",{attrs:{params:t.currentTableTime}}):t._e(),t._v(" "),i("hs-filter-train",{attrs:{filters:t.details.Filters},on:{confirmFliter:t._confirmFliter},model:{value:t.showFilter,callback:function(e){t.showFilter=e},expression:"showFilter"}}),t._v(" "),i("hs-address-picker",{attrs:{switchList:[t.$t("base.City")],title:t.$t("base.ArrivalCity")},on:{select:t._setAddressWhereBack},model:{value:t.showWhereBack,callback:function(e){t.showWhereBack=e},expression:"showWhereBack"}}),t._v(" "),t.trainRight?i("hs-date-picker",{attrs:{date:t.isCurrentDate,overdueDate:""+(this.isGoRoute||this.isOneWay?t.beTime(new Date):t.trainOrder.DepartDate),maxToDataDays:t.trainRight.CanBookDays,title:t.$t("base.DepartureDate")},on:{changeDate:t._setChangeDate},model:{value:t.showDatePicker,callback:function(e){t.showDatePicker=e},expression:"showDatePicker"}}):t._e(),t._v(" "),i("c-travel-standard",{attrs:{details:t.trainRight.TrainRank,travelPolicy:t.trainRight.TravelPolicy,type:3},model:{value:t.showTravelStandard,callback:function(e){t.showTravelStandard=e},expression:"showTravelStandard"}})],1)},staticRenderFns:[]};var y=i("VU/8")(b,S,!1,function(t){i("Y/in")},"data-v-783ca1a5",null);e.default=y.exports}});
//# sourceMappingURL=39.e72c7ee87ddfa7647cdf.js.map