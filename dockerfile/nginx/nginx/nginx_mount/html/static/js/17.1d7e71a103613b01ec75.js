webpackJsonp([17],{"7bi2":function(e,t){},nU8l:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mvHQ"),n=i.n(s),a=i("Dd8w"),o=i.n(a),r=i("C0NF"),l=i("kyCV"),c=i("qqDs"),d=i("gyMJ"),g=i("NYxO"),u={mounted:function(){this._checkVersion(),this._getDetails(),this._getBannners(),this._getNotice(),this._getCalendarGet()},beforeDestroy:function(){clearInterval(this.timeInterval)},data:function(){return{tableViewOptions:{pullDownRefresh:{threshold:50}},details:{},banners:[],bannerSwiper:void 0,version:"",bookActivedIndex:1,messages:[],messagesIndex:0}},methods:o()({},Object(g.d)(["SET_UN_HANDLE_VETTING_COUNT"]),{_getCalendarGet:function(){var e=this.beTime(new Date),t=this.getNewDate(this.beTime(new Date),1,0,0),i={StartDate:this.beTimeNumber(e),EndDate:this.beTimeNumber(t)};Object(d.b)(i).then(function(e){window.localStorage.CALENDAR=n()(e.ResultData)})},_getNotice:function(){var e=this;Object(d._25)({PageIndex:1,Source:0}).then(function(t){e.messages=t.ResultData.Notices.map(function(e){return e.Title}),e.$refs.M1.innerHTML=e.messages[0],e.$refs.M1.innerText=e.messages[0],e.$refs.M2.innerHTML=e.messages[1],e.$refs.M2.innerText=e.messages[1],e.messages.length>1&&e._startInterval()})},_startInterval:function(){var e=this;this.timeInterval&&clearInterval(this.timeInterval);var t=this.$refs.AnnouncementTitle.getBoundingClientRect().width,i=this.$refs.AnnouncementMore.getBoundingClientRect().width;this.$refs.AnnouncementMessage.style.width="calc(100% - "+t+"px - "+i+"px - 40px)",this.timeInterval=setInterval(function(){e.messagesIndex++,e.messagesIndex%2==0?(e.$refs.M1.style.top="0px",e.$refs.M2.style.top="-40px",e.$refs.M1.style["z-index"]=9,e.$refs.M2.style["z-index"]=1,setTimeout(function(){e.$refs.M2.style.top="40px",e.$refs.M2.innerHTML=e.messages[(e.messagesIndex+1)%e.messages.length],e.$refs.M2.innerText=e.messages[(e.messagesIndex+1)%e.messages.length]},500)):(e.$refs.M1.style.top="-40px",e.$refs.M2.style.top="0px",e.$refs.M1.style["z-index"]=1,e.$refs.M2.style["z-index"]=9,setTimeout(function(){e.$refs.M1.style.top="40px",e.$refs.M1.innerHTML=e.messages[(e.messagesIndex+1)%e.messages.length],e.$refs.M1.innerText=e.messages[(e.messagesIndex+1)%e.messages.length]},500))},5e3)},_reloadWebview:function(){window.localStorage.clear(),window.location.reload()},_getDetails:function(){var e=this;Object(d.I)().then(function(t){e.details=t.ResultData,e.bookActivedIndex=2===e.details.PayTypePermission?2:1,e.SET_UN_HANDLE_VETTING_COUNT(e.details.UnHandleVettingCount);var i=document.body.offsetHeight;e.$refs.BookBox.style["min-height"]=i-170-50-50-40-60+"px",e._checkLocalStorageWithStaticJson()}).catch(function(){e.$refs.tableView&&e.$refs.tableView.forceUpdate()})},_getBannners:function(){var e=this;Object(d.a)({adType:0}).then(function(t){e.banners=t.ResultData})},_checkLocalStorageWithStaticJson:function(){var e=this;if(!window.localStorage.CityVersion){window.localStorage.CityVersion=n()({NationVersion:"",FlightCityVersion:"",IntlFlightCityVersion:"",HotelCityVersion:"",IntlHotelCityVersion:"",TrainCityVersion:""})}var t=JSON.parse(window.localStorage.CityVersion);t.NationVersion!==this.details.CityVersion.NationVersion&&Object(d._18)().then(function(i){e._saveLocalStorageWithStaticJson("NATION",i.ResultData),t.NationVersion=e.details.CityVersion.NationVersion,window.localStorage.CityVersion=n()(t)}),t.FlightCityVersion!==this.details.CityVersion.FlightCityVersion&&Object(d.k)().then(function(i){e._saveLocalStorageWithStaticJson("DOMESTIC_PLANE_CITY",i.ResultData),t.FlightCityVersion=e.details.CityVersion.FlightCityVersion,window.localStorage.CityVersion=n()(t)}),t.IntlFlightCityVersion!==this.details.CityVersion.IntlFlightCityVersion&&Object(d._17)().then(function(i){e._saveLocalStorageWithStaticJson("INTL_PLANE_CITY",i.ResultData),t.IntlFlightCityVersion=e.details.CityVersion.IntlFlightCityVersion,window.localStorage.CityVersion=n()(t)}),t.HotelCityVersion!==this.details.CityVersion.HotelCityVersion&&Object(d.Q)().then(function(i){e._saveLocalStorageWithStaticJson("DOMESTIC_HOTEL_CITY",i.ResultData),t.HotelCityVersion=e.details.CityVersion.HotelCityVersion,window.localStorage.CityVersion=n()(t)}),t.IntlHotelCityVersion!==this.details.CityVersion.IntlHotelCityVersion&&Object(d._9)().then(function(i){e._saveLocalStorageWithStaticJson("INTER_HOTEL_CITY",i.ResultData),t.IntlHotelCityVersion=e.details.CityVersion.IntlHotelCityVersion,window.localStorage.CityVersion=n()(t)}),t.TrainCityVersion!==this.details.CityVersion.TrainCityVersion&&Object(d._34)().then(function(i){e._saveLocalStorageWithStaticJson("DOMESTIC_TRAIN_CITY",i.ResultData),t.TrainCityVersion=e.details.CityVersion.TrainCityVersion,window.localStorage.CityVersion=n()(t)}),window.localStorage.CityVersion=n()(this.details.CityVersion)},_saveLocalStorageWithStaticJson:function(e,t){var i=JSON.parse(n()(t))[0],s=JSON.parse(n()(t)).slice(1);s.map(function(e){return e.open=!1,e});var a={hot:i,list:s},o=window.localStorage;o.removeItem("HISTORY_"+e),o.setItem(e,n()(a))},_checkVersion:function(){window.localStorage.version=this.version=this.$refs.GetVersion.title},_gotoPlaneTicketQuery:function(){this.$router.push({path:"/planeTicket/query",query:{TravelType:this.bookActivedIndex-1}})},_gotoHotelQuery:function(){this.$router.push({path:"/hotel/query",query:{TravelType:this.bookActivedIndex-1}})},_gotoTrainTicketQuery:function(){this.$router.push({path:"/train/query",query:{TravelType:this.bookActivedIndex-1}})}}),components:{HsScroll:r.a,HsSwiper:l.a,CTabbar:c.a}},v={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hs-container"},[i("hs-scroll",{ref:"tableView",staticClass:"table-view",attrs:{data:[e.details],options:e.tableViewOptions},on:{"pulling-down":e._reloadWebview}},[i("ul",[i("div",{staticClass:"color-box"},[i("p",[e._v(e._s(e.$t("base.Welcome"))+"!")]),e._v(" "),i("p",[e._v(e._s(e.details.CompanyName))])]),e._v(" "),i("div",{staticClass:"slider-box"},[i("div",[i("hs-swiper",{attrs:{images:e.banners.map(function(e){return e.PicUrl})}})],1)]),e._v(" "),i("div",{staticClass:"announcement",on:{click:function(t){e.$router.push("/announcement/list")}}},[i("div",{staticClass:"details"},[i("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/home/announcement.png')"}}),e._v(" "),i("p",{ref:"AnnouncementTitle",staticClass:"title"},[e._v(e._s(e.$t("base.Announcement")))]),e._v(" "),i("div",{ref:"AnnouncementMessage",staticClass:"messages"},[i("p",{ref:"M1",staticClass:"m1"}),e._v(" "),i("p",{ref:"M2",staticClass:"m2"})]),e._v(" "),i("p",{ref:"AnnouncementMore"},[e._v(" | "+e._s(e.$t("base.More_2")))])])]),e._v(" "),i("div",{ref:"BookBox",staticClass:"book-box"},[i("div",{staticClass:"header"},[i("div",{staticClass:"item",class:{"item-actived":1===e.bookActivedIndex},on:{click:function(t){e.bookActivedIndex=1}}},[e._v(e._s(e.$t("base.BusinessTrip")))]),e._v(" "),e.details.EnablePrivate?i("div",{staticClass:"item",class:{"item-actived":2===e.bookActivedIndex},on:{click:function(t){e.bookActivedIndex=2}}},[e._v(e._s(e.$t("base.PersonalTrip")))]):e._e()]),e._v(" "),i("div",{staticClass:"entry"},[!e.details.MenuPermissions||-1==e.details.MenuPermissions.indexOf(1)&&-1==e.details.MenuPermissions.indexOf(3)?e._e():i("div",{staticClass:"blank",on:{click:e._gotoPlaneTicketQuery}},[i("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/tabbar/plane@2x.png')"}}),e._v(" "),i("div",{staticClass:"des"},[i("p",[e._v(e._s(e.$t("base.Flights")))]),e._v(" "),i("p",[e._v(e._s(e.$t("base.FlightsDes")))])]),e._v(" "),i("div",{staticClass:"arrow",staticStyle:{"background-image":"url('static/image/base/cell/right_arrow_gray.png')"}})]),e._v(" "),!e.details.MenuPermissions||-1==e.details.MenuPermissions.indexOf(2)&&-1==e.details.MenuPermissions.indexOf(4)?e._e():i("div",{staticClass:"blank",on:{click:e._gotoHotelQuery}},[i("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/tabbar/hotel@2x.png')"}}),e._v(" "),i("div",{staticClass:"des"},[i("p",[e._v(e._s(e.$t("base.Hotel")))]),e._v(" "),i("p",[e._v(e._s(e.$t("base.HotelDes")))])]),e._v(" "),i("div",{staticClass:"arrow",staticStyle:{"background-image":"url('static/image/base/cell/right_arrow_gray.png')"}})]),e._v(" "),e.details.MenuPermissions&&-1!=e.details.MenuPermissions.indexOf(5)?i("div",{staticClass:"blank",on:{click:e._gotoTrainTicketQuery}},[i("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/tabbar/train@2x.png')"}}),e._v(" "),i("div",{staticClass:"des"},[i("p",[e._v(e._s(e.$t("base.Trains")))]),e._v(" "),i("p",[e._v(e._s(e.$t("base.TrainsDes")))])]),e._v(" "),i("div",{staticClass:"arrow",staticStyle:{"background-image":"url('static/image/base/cell/right_arrow_gray.png')"}})]):e._e()])]),e._v(" "),i("div",{staticStyle:{width:"100%",height:"20px"}})])]),e._v(" "),i("c-tabbar"),e._v(" "),i("div",{ref:"GetVersion",staticClass:"getVersion",attrs:{title:"1.3.0.4"}})],1)},staticRenderFns:[]};var _=i("VU/8")(u,v,!1,function(e){i("7bi2")},"data-v-fd098e32",null);t.default=_.exports}});
//# sourceMappingURL=17.1d7e71a103613b01ec75.js.map