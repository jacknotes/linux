webpackJsonp([16],{GrOm:function(t,e){},Ndu3:function(t,e){},X2rW:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("woOf"),i=s.n(a),l=s("7+uW"),n=s("F+NM"),o=s("CCVD"),r=s("v2mk"),c=s("mT1R"),d=s("vgdM"),_=s("4aFc"),u=s("LrqJ"),v=s("bJna"),m=s("C0NF"),p=s("9Vmw"),g=s("DC+l"),h={props:{datalist:{type:Array,default:function(){return[]}}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"segment"},t._l(t.datalist,function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"node"},[s("div",[s("div",{staticClass:"dot"}),t._v(" "),s("div",{staticClass:"time"},[s("p",[t._v(t._s(e.DepartureShortTime))]),t._v(" "),0!=a?s("p",{staticClass:"small"},[t._v(t._s(e.DepartureTime))]):t._e()]),t._v(" "),s("p",{staticClass:"airport"},[t._v(t._s(e.DepartAirportName)+" "+t._s(e.DepartTerminal))])])]),t._v(" "),s("div",{staticClass:"infor"},[s("div",[s("p",{staticClass:"time"},[t._v("飞行"+t._s(e.FlightTime))]),t._v(" "),s("div",{staticClass:"plane"},[s("div",{staticClass:"logo",style:{"background-image":"url("+e.AirLineLogoUrl+")"}}),t._v(" "),s("p",[t._v(t._s(e.AirLineName)+t._s(e.FlightNo)+" | "+t._s(e.Plane))])])])]),t._v(" "),e.StopInfoList&&e.StopInfoList.length>0?t._l(e.StopInfoList,function(e,a){return s("div",{key:"stop"+a,staticClass:"stop"},[s("div",[s("div",{staticClass:"content"},[s("p",[t._v("经停")]),t._v(" "),s("p",[t._v(t._s(e.AirportName)+"停留"+t._s(e.Duration))])])])])}):t._e(),t._v(" "),s("div",{staticClass:"node"},[s("div",[s("div",{staticClass:"dot"}),t._v(" "),s("div",{staticClass:"time"},[s("p",[t._v(t._s(e.ArrivalShortTime))]),t._v(" "),a!==t.datalist.length-1?s("p",{staticClass:"small"},[t._v(t._s(e.ArrivalTime))]):t._e()]),t._v(" "),s("p",{staticClass:"airport"},[t._v(t._s(e.ArrivalAirportName)+" "+t._s(e.ArrivalTerminal))])])]),t._v(" "),e.TransferCityName&&a<t.datalist.length-1?s("div",{staticClass:"transfer"},[s("div",[s("div",{staticClass:"content"},[s("p",[t._v("中转")]),t._v(" "),s("p",[t._v(t._s(e.TransferCityName)+"中转 停留"+t._s(e.TransferTime))])])])]):t._e()],2)}))},staticRenderFns:[]};var C=s("VU/8")(h,f,!1,function(t){s("GrOm")},"data-v-3cf507ae",null).exports,b=s("gyMJ"),D={created:function(){this.noValue(this.$route.query.ID)?this.$router.replace("/intlPlaneTicket/orderList"):this.noValue(this.$route.query.ID)||this._getOrderDetails()},computed:{insurances:function(){var t=[];return this.details.Passengers.forEach(function(e){e.Insurances&&e.Insurances.map(function(t){return t.TmpID=""+t.InsuranceCategory+t.SalePrice,t}).forEach(function(e){if(e.SalePrice>=0&&e.Count>0){var s=t.map(function(t){return t.TmpID}).indexOf(e.TmpID);s<0?t.push(i()(e,{number:e.Count})):t[s].number+=e.Count}})}),t},infoIndex:function(){return this.details.VettingRecordInfos?this.details.VettingRecordInfos.map(function(t){return t.TemplateNodeProcessStatusDesc}).indexOf("进行中"):-1}},data:function(){return{tableViewOptions:{pullDownRefresh:{threshold:50}},details:{},showExamineProcess:!1,showSegmentDetailsDialog:!1,showDetailsDialog:!1,showAlert:!1,vettingContent:1,vettingMemo:""}},filters:{filterPayType:function(t){switch(t){case 1:return l.a.prototype.$t("base.CompanyPayment");case 2:return l.a.prototype.$t("base.PersonalPayment");case 3:return l.a.prototype.$t("base.CompanyPayment")+"("+l.a.prototype.$t("base.Prepayments")+")";default:return l.a.prototype.$t("base.Unknown")}}},methods:{_getOrderDetails:function(){var t=this,e={ID:this.$route.query.ID,Type:this.$route.query.isOwner?0:1};Object(b._20)(e).then(function(e){t.details=e.ResultData})},_gotoSubmitAndPay:function(){var t=this;this.$alert({content:this.$t("TM.AreYouSureToSubmitAndPayForTheOrder"),cancelTxt:this.$t("base.Cancel"),confirmFn:function(){var e={OrderIDs:[t.details.ID]};Object(b._14)(e).then(function(e){!0===e.ResultData?(t._getOrderDetails(),t._gotoPay()):t.$toast(t.$t("TM.TheSubmissionFailedPleaseTryAgainLater"))})}})},_submit:function(){var t=this;this.$alert({content:this.$t("TM.AreYouSureToSubmitYourOrder"),cancelTxt:this.$t("base.Cancel"),confirmFn:function(){var e={OrderIDs:[t.details.ID]};Object(b._14)(e).then(function(e){!0===e.ResultData?(t.$toast(t.$t("TM.SubmitSucceed")),setTimeout(function(){r.a.$emit("refresh")},0),t.$router.replace({name:"intlPlaneTicketOrderList",params:{TravelType:Number(t.details.TravelType)}})):t.$toast(t.$t("TM.TheSubmissionFailedPleaseTryAgainLater"))})}})},_gotoPay:function(){this.$refs.Pay&&this.$refs.Pay.gotoPay({OrderBusinessType:6,OrderID:this.details.ID,PayWay:3,TravelType:Number(this.details.TravelType),CallbackPathName:"intlPlaneTicketOrderList"})},_cancel:function(){var t=this;this.$alert({content:this.$t("TM.AreYouSureToCancelTheOrder"),cancelTxt:this.$t("base.Cancel"),confirmFn:function(){var e={OrderID:t.details.ID};Object(b._12)(e).then(function(e){!0===e.ResultData?(t.$toast(t.$t("TM.OrderCancelled")),setTimeout(function(){r.a.$emit("refresh")},0),t.$router.replace({name:"intlPlaneTicketOrderList",params:{TravelType:Number(t.details.TravelType)}})):t.$toast(t.$t("TM.OrderCancelFailed"))})}})},_openSegmentDetailsDialog:function(){var t=this;this.showSegmentDetailsDialog=!0,setTimeout(function(){t.$refs.segmentTableView.forceUpdate()},500)},_switchDetailsDialog:function(){this.showDetailsDialog?this.$refs.detailsDialog.showDetails=!1:this.showDetailsDialog=!0},_examineSubmit:function(){var t=this,e={ID:this.$route.query.ID,InstanceID:this.details.VettingRecordInfos[this.infoIndex].InstanceID,TemplateNodeID:this.details.VettingRecordInfos[this.infoIndex].TemplateNodeID,VettingContent:this.vettingContent,VettingMemo:this.vettingMemo,BusinessType:3};Object(b._66)(e).then(function(e){!0===e.ResultData&&t.$toast(t.$t("TM.ApprovalSubmitted"),{complete:function(){setTimeout(function(){r.a.$emit("refresh")},0),t.$router.replace({path:"/message/examine",query:{QuerySource:0}})}})})}},components:{CExamineProcess:n.a,CHeader:o.a,HsAlert:c.a,HsButton:d.a,HsCell1:_.a,HsCellSmallTitle:u.a,HsDialog:v.a,HsScroll:m.a,HsSection:p.a,Pay:g.a,Segment:C}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.noValue(JSON.stringify(t.details))?t._e():s("div",{staticClass:"hs-container"},[s("c-header",{attrs:{title:t.$t("base.OrderDetails"),isBackNav:""}}),t._v(" "),s("hs-scroll",{staticClass:"table-view",attrs:{data:[t.details],options:t.tableViewOptions},on:{"pulling-down":t._getOrderDetails}},[s("ul",[s("hs-section",[s("hs-cell-1",{attrs:{showLogo:!1}},[s("div",{staticClass:"state-details"},[s("div",{staticClass:"header",attrs:{type:t.language}},[s("p",[t._v(t._s(t.details.OrderStatusDesc))]),t._v(" "),s("p",[t._v(t._s(t.details.VettingStatusDesc))]),t._v(" "),s("p",[t._v(t._s(t.details.OrderStatusDesc))])]),t._v(" "),s("p",{staticClass:"infor"},[t._v(t._s(t.$t("base.OrderNumber"))+": "+t._s(t.details.OrderNo))]),t._v(" "),s("p",{staticClass:"infor"},[t._v(t._s(t.$t("base.OrderDate"))+": "+t._s(t.$t(t.beTime(t.details.OrderDate),"date",["yyyy-MM-dd","MM dd, yyyy"]))+" "+t._s(t.beTime(t.details.OrderDate,"hh:mm")))]),t._v(" "),t.$route.query.isOwner?s("div",{staticClass:"buttons"},[t.details.PageBtnInfo.IsAllowPayAndSubmit?s("hs-button",{staticClass:"button",on:{click:t._gotoSubmitAndPay}},[t._v("\n                "+t._s(t.$t("base.SubmitAndPay"))+"\n              ")]):t._e(),t._v(" "),t.details.PageBtnInfo.IsAllowSubmit?s("hs-button",{staticClass:"button",on:{click:t._submit}},[t._v("\n                "+t._s(t.$t("base.Submit"))+"\n              ")]):t._e(),t._v(" "),t.details.PageBtnInfo.IsAllowPay?s("hs-button",{staticClass:"button",on:{click:t._gotoPay}},[t._v("\n                "+t._s(t.$t("base.Pay"))+"\n              ")]):t._e(),t._v(" "),t.details.PageBtnInfo.IsAllowCancel?s("hs-button",{staticClass:"button",attrs:{type:"common"},on:{click:t._cancel}},[t._v("\n                "+t._s(t.$t("base.CancelOrder"))+"\n              ")]):t._e()],1):t._e(),t._v(" "),t.infoIndex>=0&&t.$route.query.isExamine&&1===Number(t.details.VettingStatus)?s("div",{staticClass:"buttons"},[s("hs-button",{staticClass:"button",on:{click:function(e){t.vettingContent=1,t.showAlert=!0}}},[t._v(t._s(t.$t("base.Pass")))]),t._v(" "),s("hs-button",{staticClass:"button",attrs:{type:"common"},on:{click:function(e){t.vettingContent=0,t.showAlert=!0}}},[t._v(t._s(t.$t("base.Reject")))])],1):t._e()])])],1),t._v(" "),s("hs-section",{attrs:{backgroundColor:"#F6F7F8"}},[s("div",{staticClass:"custom-cell-segments"},[s("div",{staticClass:"segments",on:{click:t._openSegmentDetailsDialog}},[s("div",{staticClass:"details"},t._l(t.details.Segements,function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"mark"},[t._v(t._s(e.SegementName))]),t._v(" "),s("p",[t._v(t._s(e.DepartureDate.substring(5,10)))]),t._v(" "),s("p",[t._v(t._s(t.getWeeks(e.DepartureDate.split(" ")[0])))]),t._v(" "),s("p",[t._v(t._s(e.DepartureDate.split(" ")[1]))]),t._v(" "),s("p",[t._v(t._s(e.Route))])])})),t._v(" "),s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/cell/right_arrow_gray.png')"}})]),t._v(" "),t.details&&t.details.FeeDetails?s("div",{staticClass:"infor"},[s("p",[t._v("退改签 >")])]):t._e()])]),t._v(" "),s("hs-section",t._l(t.details.Passengers,function(e,a){return s("hs-cell-1",{key:a,attrs:{showLogo:!1,showSeparator:!1}},[s("div",{staticClass:"custom-cell-people"},[s("div",{staticClass:"left",style:{opacity:0===a?1:0}},[s("p",[t._v(t._s(t.$t("base.Passenger")))])]),t._v(" "),s("div",{staticClass:"right",style:{"border-bottom-width":a===t.details.Passengers.length-1?"0px":"1px"}},[s("div",{staticClass:"name"},[s("p",[t._v(t._s(e.Name))])]),t._v(" "),s("div",{staticClass:"others"},[s("p",[t._v(t._s(e.Credential.CredentialName)+" "+t._s(e.Credential.CredentialNo))]),t._v(" "),t._l(e.Insurances,function(e,a){return e.Count>0?s("p",{key:a,staticClass:"insure"},[t._v("\n                  "+t._s(e.InsuranceCategory)+"\n                  "),t.details.Segments&&t.details.Segments.length>1?[t._v("("+t._s(1===e.Order?t.$t("base.Going"):t.$t("base.Return"))+")")]:t._e(),t._v("\n                  x "+t._s(e.Count)+t._s(t.$t("base.Copy"))+"\n                ")],2):t._e()})],2)])])])})),t._v(" "),s("hs-section",[t.details.CustomItem&&t.details.CustomItem.Name?s("hs-cell-small-title",{attrs:{title:t.details.DisplayConfig.CustomItemName,type:"bold",value:t.details.CustomItem.Name,showLogo:!1}}):t._e(),t._v(" "),t.details.Purpose?s("hs-cell-small-title",{attrs:{title:t.$t("base.TravelPurpose"),type:"bold",value:t.details.Purpose,showLogo:!1}}):t._e(),t._v(" "),t.details.AuthorizationCode?s("hs-cell-small-title",{attrs:{title:t.$t("base.AuthorizationCode"),type:"bold",showLogo:!1},model:{value:t.details.AuthorizationCode,callback:function(e){t.$set(t.details,"AuthorizationCode",e)},expression:"details.AuthorizationCode"}}):t._e(),t._v(" "),s("hs-cell-small-title",{attrs:{title:t.$t("base.BookingSource"),type:"bold",value:t.details.BookingSourceDesc,showLogo:!1}}),t._v(" "),"CN"===t.language?[t.details.VettingRecordInfos&&t.details.VettingRecordInfos.length>0?s("hs-cell-small-title",{attrs:{title:t.$t("base.ApprovalInformation"),type:"bold"},nativeOn:{click:function(e){t.showExamineProcess=!0}}}):t._e()]:[t.details.VettingRecordInfos&&t.details.VettingRecordInfos.length>0?s("hs-cell-small-title",{attrs:{title:t.$t("base.ApprovalInformation"),type:"bold",value:t.details.VettingStatusDesc},nativeOn:{click:function(e){t.showExamineProcess=!0}}}):t._e()],t._v(" "),0===Number(t.details.TravelType)?s("hs-cell-small-title",{attrs:{title:t.$t("base.PaymentWay"),type:"bold",value:t._f("filterPayType")(t.details.PayType),showLogo:!1}}):t._e(),t._v(" "),t.details.ReasonCode?s("hs-cell-small-title",{attrs:{title:t.$t("base.ViolationOfRank"),type:"bold",value:t.details.ReasonCode,warning:!1,showLogo:!1},on:{header:t._getTravelStandard}}):t._e()],2),t._v(" "),s("hs-section",t._l(t.details.Contacts,function(e,a){return s("hs-cell-1",{key:a,attrs:{showLogo:!1,showSeparator:!1}},[s("div",{staticClass:"custom-cell-people"},[s("div",{staticClass:"left",style:{opacity:0===a?1:0}},[s("p",[t._v(t._s(t.$t("base.ContactInformation")))])]),t._v(" "),s("div",{staticClass:"right",style:{"border-bottom-width":a===t.details.Contacts.length-1?"0px":"1px"}},[s("div",{staticClass:"name"},[s("p",[t._v(t._s(e.Name))])]),t._v(" "),s("div",{staticClass:"others"},[s("p",[t._v(t._s(t.$t("base.CellphoneNumber"))+" "+t._s(e.Mobile?e.Mobile:t.$t("base.Unfilled")))]),t._v(" "),s("p",[t._v(t._s(t.$t("base.Email"))+" "+t._s(e.Email?e.Email:t.$t("base.Unfilled")))])])])])])}))],1)]),t._v(" "),s("div",{staticClass:"footer",on:{click:t._switchDetailsDialog}},[s("div",{staticClass:"price"},[s("p",[t._v(t._s(t.$t("base.TotalAmount")))]),t._v(" "),s("p",[t._v("￥"+t._s(t.details.TotalPrice))])]),t._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/cell/right_arrow_gray.png')"},style:{transform:t.showDetailsDialog?"rotate(90deg)":"rotate(-90deg)"}})])]),t._v(" "),s("hs-dialog",{ref:"detailsDialog",attrs:{height:"calc(100% - 50px)"},model:{value:t.showDetailsDialog,callback:function(e){t.showDetailsDialog=e},expression:"showDetailsDialog"}},[s("hs-scroll",{staticClass:"detailsDialog",attrs:{data:[t.details]},nativeOn:{click:function(t){t.stopPropagation()}}},[s("ul",[t.details.FeeDetails[0].ChargeInfo?s("hs-section",[t.details.FeeDetails[0].ChargeInfo.SalesPrice>=0?s("hs-cell-1",{attrs:{showLogo:!1}},[s("div",{staticClass:"detailsDialog-custom-cell"},[s("p",[t._v(t._s(t.$t("base.AirTickets")))]),t._v(" "),s("p",[s("span",[t._v("￥"+t._s(t.details.FeeDetails[0].ChargeInfo.SalesPrice))]),s("span",[t._v("x "+t._s(t.details.Passengers.length)+t._s(t.$t("base.QuantifierPeople")))])])])]):t._e(),t._v(" "),t.details.FeeDetails[0].ChargeInfo.Tax>=0?s("hs-cell-1",{attrs:{showLogo:!1}},[s("div",{staticClass:"detailsDialog-custom-cell"},[s("p",[t._v(t._s(t.$t("base.Tax")))]),t._v(" "),s("p",[s("span",[t._v("￥"+t._s(t.details.FeeDetails[0].ChargeInfo.Tax))]),s("span",[t._v("x "+t._s(t.details.Passengers.length)+t._s(t.$t("base.QuantifierPeople")))])])])]):t._e(),t._v(" "),t.details.FeeDetails[0].ChargeInfo.ServiceFee>=0?s("hs-cell-1",{attrs:{showLogo:!1}},[s("div",{staticClass:"detailsDialog-custom-cell"},[s("p",[t._v(t._s(t.$t("base.ServiceFee")))]),t._v(" "),s("p",[s("span",[t._v("￥"+t._s(t.details.FeeDetails[0].ChargeInfo.ServiceFee))]),s("span",[t._v("x "+t._s(t.details.Passengers.length)+t._s(t.$t("base.QuantifierPeople")))])])])]):t._e(),t._v(" "),t.details.FeeDetails[0].ChargeInfo.RebateDiscount>0?s("hs-cell-1",{attrs:{showLogo:!1}},[s("div",{staticClass:"detailsDialog-custom-cell"},[s("p",[t._v(t._s(t.$t("base.FrontReturn")))]),t._v(" "),s("p",[s("span",[t._v("-￥"+t._s(t.details.FeeDetails[0].ChargeInfo.RebateDiscount))]),s("span",[t._v("x "+t._s(t.details.Passengers.length)+t._s(t.$t("base.QuantifierPeople")))])])])]):t._e(),t._v(" "),t._l(t.insurances,function(e,a){return s("hs-cell-1",{key:a,attrs:{showLogo:!1}},[s("div",{staticClass:"detailsDialog-custom-cell"},[s("p",[t._v(t._s(e.InsuranceCategory))]),t._v(" "),s("p",[s("span",[t._v("￥"+t._s(e.SalePrice))]),s("span",[t._v("x "+t._s(e.number)+t._s(t.$t("base.Copy")))])])])])})],2):t._e()],1)])],1),t._v(" "),s("hs-dialog",{ref:"SegmentDetails",model:{value:t.showSegmentDetailsDialog,callback:function(e){t.showSegmentDetailsDialog=e},expression:"showSegmentDetailsDialog"}},[s("div",{staticClass:"segmentDetails",nativeOn:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"header"},[s("div",{staticClass:"logo"}),t._v(" "),s("p",[t._v("航班详情")]),t._v(" "),s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/query/close.png')"},on:{click:function(e){t.$refs.SegmentDetails.showDetails=!1}}})]),t._v(" "),s("hs-scroll",{ref:"segmentTableView",staticClass:"details",attrs:{data:[t.details.Segements]}},[t.details.Segements?s("ul",t._l(t.details.Segements,function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"item-header"},[s("div",{staticClass:"mark"},[t._v(t._s(e.SegementName))]),t._v(" "),s("p",[t._v(t._s(e.DepartureDate.substring(5,10)))]),t._v(" "),s("p",[t._v(t._s(t.getWeeks(e.DepartureDate.split(" ")[0])))]),t._v(" "),s("p",[t._v(t._s(e.DepartureDate.split(" ")[1]))]),t._v(" "),s("p",[t._v(t._s(e.Route))])]),t._v(" "),s("segment",{attrs:{datalist:e.Legs}})],1)})):t._e()])],1)]),t._v(" "),s("c-examine-process",{attrs:{businessName:t.$t("base.Passenger"),datalist:t.details.VettingRecordInfos,passengers:t.details.Passengers},model:{value:t.showExamineProcess,callback:function(e){t.showExamineProcess=e},expression:"showExamineProcess"}}),t._v(" "),s("pay",{ref:"Pay"}),t._v(" "),s("hs-alert",{attrs:{show:t.showAlert,title:1===t.vettingContent?t.$t("base.ApprovedPass"):t.$t("base.ApprovalRejection"),cancelBtn:"",maskClose:""},on:{"update:show":function(e){t.showAlert=e},confirm:t._examineSubmit}},[s("div",{staticClass:"hs-alert-content",attrs:{slot:"content"},slot:"content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.vettingMemo,expression:"vettingMemo"}],attrs:{maxlength:"50",placeholder:t.$t("base.PleaseEnterAComment")},domProps:{value:t.vettingMemo},on:{input:function(e){e.target.composing||(t.vettingMemo=e.target.value)}}})])])],1)},staticRenderFns:[]};var $=s("VU/8")(D,y,!1,function(t){s("Ndu3")},"data-v-b9def71c",null);e.default=$.exports}});
//# sourceMappingURL=16.aace6b82b52f6c916f97.js.map