webpackJsonp([58],{"5E36":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("woOf"),i=s.n(a),n=s("mvHQ"),l=s.n(n),o=s("CCVD"),c=s("C0NF"),d=s("9Vmw"),r=s("4aFc"),u=s("vgdM"),v=s("BR7v"),h=s("mT1R"),_=s("w8HC"),g=s("6Qj3"),p=s("5Xkm"),f=s("v2mk"),C=s("gyMJ"),m={beforeRouteLeave:function(e,t,s){this.showCContacts?(this.showCContacts=!1,s(!1)):s()},created:function(){this._getData()},data:function(){return{tableViewOptions:{pullDownRefresh:{threshold:50}},details:{},showExplain:!1,returnExplainDetails:{},showCContacts:!1,contactDetails:{},showAlert:!1}},methods:{_getData:function(){var e=this,t={ItktID:this.$route.query.ItktID,PnrID:this.$route.query.PnrID};Object(C.u)(t).then(function(t){e.details=t.ResultData,e.details.Passengers.forEach(function(t,s){e.$set(e.details.Passengers[s],"isOpen",!1),e.$set(e.details.Passengers[s],"isSelected",!1),e.$set(e.details.Passengers[s],"IsSendRefundSms",!0),e.$set(e.details.Passengers[s],"IsSendRefundEmail",!0),e.$set(e.details.Passengers[s],"IsSendRefundWechat",!0)}),e.$set(e.details.DefaultContact,"isOpen",!0),e.$set(e.details.DefaultContact,"IsSendRefundSms",!0),e.$set(e.details.DefaultContact,"IsSendRefundEmail",!0),e.$set(e.details.DefaultContact,"IsSendRefundWechat",!0),e.$set(e.details.DefaultContact,"openDelete",!1),e.$set(e.details,"ContactList",[e.details.DefaultContact]),e.$set(e.details,"TicketList",[]),e.$set(e.details,"RefundType",0),e.details.Passengers&&1===e.details.Passengers.length&&e._togglePassengerSelect(0)})},_showSegmentTitle:function(e){var t=this.details.Segments&&!this.noValue(l()(this.details.Segments))?this.details.Segments.length:0;return 1===t?this.$t("base.OneWay"):2===t&&this.details.Segments[0].DepartCityName===this.details.Segments[1].ArrivalCityName?0===e?this.$t("base.Going"):this.$t("base.Return"):this.$t("base.NoXSegment","function",e+1)},_getFlightCabinRule:function(e){this.showExplain=!0,this.returnExplainDetails={vhtml:e}},_togglePassengerSelect:function(e){this.details.Passengers[e].isSelected=!this.details.Passengers[e].isSelected,this.details.Passengers[e].isOpen=this.details.Passengers[e].isSelected;var t=this.details.TicketList.map(function(e){return e.PassengerID}).indexOf(this.details.Passengers[e].PsgID);this.details.Passengers[e].isSelected?t<0&&this.details.TicketList.push({PassengerID:this.details.Passengers[e].PsgID,Name:this.details.Passengers[e].Name,TicketNo:this.details.Passengers[e].OriginTicketNo,RefundPrice:this.details.Passengers[e].RefundPrice,ServicePrice:this.details.Passengers[e].ServicePrice?this.details.Passengers[e].ServicePrice:0,Mobile:this.details.Passengers[e].Mobile,Email:this.details.Passengers[e].Email,IsSendRefundSms:this.details.Passengers[e].PsgIsSendRefundSmsID,IsSendRefundEmail:this.details.Passengers[e].IsSendRefundEmail,IsSendRefundWechat:this.details.Passengers[e].IsSendRefundWechat}):t>=0&&this.details.TicketList.splice(t,1)},_setContactsOpenDelete:function(e,t){this.details.ContactList[t].openDelete=e},_gotoContactsDetails:function(e){this.details.ContactList[e].openDelete?this._setContactsOpenDelete(!1,e):(this.contactDetails=i()(JSON.parse(l()(this.details.ContactList[e])),{index:e}),this.showCContacts=!0)},_deleteContact:function(e){this.details.ContactList.splice(e,1)},_contactsDelegate:function(e){this.details.ContactList.splice(e.index,1,i()(e,{openDelete:!1}))},_delegateWithFrequentContacts:function(e){this.details.ContactList=e},_gotoRefund:function(){this.noValue(this.details.TicketList)||0===this.details.TicketList.length?this.$toast(this.$t("TM.PleaseSelectThePassengerWhoNeedsToRefund")):this.noValue(this.details.ContactList)||0===this.details.ContactList.length?this.$toast(this.$t("TM.PleaseFill","function",this.$t("base.Contacts"))):this._showTipDialog(this.$t("TM.WhetherToConfirmTheRefund"),this._confirmRefund)},_confirmRefund:function(){var e=this,t=this.details;Object(C.z)(t).then(function(t){e.$toast(e.$t("TM.RefundSucceed")),setTimeout(function(){f.a.$emit("refresh")},0),e.$router.replace("/personal/refundList")})},_showTipDialog:function(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.$t("base.Confirm"),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$t("base.Cancel");this.dialog=this.$createDialog({type:"confirm",icon:"cubeic-alert",title:this.$t("base.Tips"),content:e,confirmBtn:{text:a,active:!0,disabled:!1,href:"javascript:;"},cancelBtn:{text:i,active:!1,disabled:!1,href:"javascript:;"},onConfirm:t,onCancel:s}),this.dialog.show()}},components:{CHeader:o.a,HsScroll:c.a,HsSection:d.a,HsCell1:r.a,HsButton:u.a,HsSwitch:v.a,HsAlert:h.a,CContacts:_.a,CReturnExplain:g.a,CFrequentContacts:p.a}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hs-container"},[s("c-header",{attrs:{title:e.$t("base.Refund"),isBackNav:""}}),e._v(" "),s("hs-scroll",{ref:"tableView",staticClass:"table-view",attrs:{data:[e.details],options:e.tableViewOptions},on:{"pulling-down":e._getData}},[s("ul",[s("div",{staticClass:"warning"},[e._v(e._s(e.$t("base.ReminderPassengersWhoHaveCheckedInMustFirstCancelTheCheckIn")))]),e._v(" "),e.details.Segments&&!e.noValue(JSON.stringify(e.details.Segments))?s("hs-section",e._l(e.details.Segments,function(t,a){return s("div",{key:a,staticStyle:{width:"100%"}},[s("hs-cell-1",{attrs:{showLogo:!1}},[s("div",{staticClass:"travel-details"},[s("div",{staticClass:"time"},[s("div",{staticClass:"mark"},[e._v(e._s(e._showSegmentTitle(a)))]),e._v(" "),s("p",[e._v(e._s(e.beTime(t.DepartDate,"MM月dd日"))+" "+e._s(e.getWeeks(e.beTime(t.DepartDate)))+" "+e._s(t.DepartCityName)+" - "+e._s(t.ArrivalCityName))])]),e._v(" "),s("div",{staticClass:"plane"},[s("div",{staticClass:"logo",style:{"background-image":"url("+t.AirLineLogoUrl+")"}}),e._v(" "),s("p",[e._v(e._s(t.AirLineName)),[e._v(" "),e.noValue(t.ActualCarryFlightNo)?e._e():s("span",[e._v(e._s(e.$t("base.CodeShare")))])],e._v(" "+e._s(t.FlightNo)),e.noValue(t.Plane)?e._e():[e._v(" | "+e._s(t.Plane))],e.noValue(t.Meal)?e._e():[e._v(" | "+e._s(t.Meal))]],2)]),e._v(" "),s("div",{staticClass:"plane"},[e.noValue(t.ActualCarryFlightNo)?e._e():s("p",[e._v(e._s(e.$t("base.OperatedBy"))+" "+e._s(t.ActualCarryFlightNo))])]),e._v(" "),s("div",{staticClass:"details"},[s("div",{staticClass:"source"},[s("p",[e._v(e._s(e.beTime(t.DepartDate,"hh:mm")))]),e._v(" "),s("p",[e._v(e._s(t.DepartAirportName)+" "+e._s(t.DepartTerminal))])]),e._v(" "),s("div",{staticClass:"to"},[t.StopOver?s("div",{staticClass:"stopOver-logo"},[s("p",[e._v(e._s(e.$t("base.By")))])]):s("div",{staticClass:"logo"}),e._v(" "),s("div",{staticClass:"dashed"}),e._v(" "),t.StopOver?s("p",{staticClass:"stopOver"},[e._v(e._s(t.StopOver.StopCity))]):e._e()]),e._v(" "),s("div",{staticClass:"destination"},[s("p",[e._v(e._s(e.beTime(t.ArrivalDate,"hh:mm"))),t.AddDays>0?s("span",[e._v("+"+e._s(t.AddDays))]):e._e()]),e._v(" "),s("p",[e._v(e._s(t.ArrivalAirportName)+" "+e._s(t.ArrivalTerminal))])])])])]),e._v(" "),s("hs-cell-1",{attrs:{showLogo:!1},nativeOn:{click:function(s){e._getFlightCabinRule(t.Rule)}}},[s("div",{staticClass:"cost-details"},[s("div",{staticClass:"details"},[s("div",[s("span",[e._v(e._s(e.$t("base.AirTickets")))]),s("span",[e._v("￥"+e._s(t.SalePrice?t.SalePrice:0))])]),e._v(" "),s("div",[s("span",[e._v(e._s(e.$t("base.PlaneConstruction"))+" / "+e._s(e.$t("base.Fuel")))]),e._v(" "),s("span",[e._v("\n                    ￥"+e._s((t.FuelOilTax?t.FuelOilTax:0)+(t.AirportTax?t.AirportTax:0))+"\n                  ")])])]),e._v(" "),s("p",[e._v(e._s(e.$t("base.TicketRestrictions"))+" >")])])])],1)})):e._e(),e._v(" "),s("hs-section",[s("hs-cell-1",{attrs:{value:e.$t("base.ChoosePassengersWhoNeedToRefund"),showLogo:!1}}),e._v(" "),e._l(e.details.Passengers,function(t,a){return t.CanRefund?s("hs-cell-1",{key:a,attrs:{showLogo:!1}},[s("div",{staticClass:"refund-passenger"},[s("div",{staticClass:"header",style:{"border-bottom-width":e.details.Passengers[a].isOpen?"1px":"0px"},on:{click:function(t){e.details.Passengers[a].isOpen=!e.details.Passengers[a].isOpen}}},[s("div",[t.isSelected?s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/check-box/check-box.png')"},on:{click:function(t){t.stopPropagation(),e._togglePassengerSelect(a)}}}):s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/check-box/check-box-default.png')"},on:{click:function(t){t.stopPropagation(),e._togglePassengerSelect(a)}}}),e._v(" "),s("p",{on:{click:function(t){t.stopPropagation(),e._togglePassengerSelect(a)}}},[e._v(e._s(t.Name))])]),e._v(" "),s("div",{staticClass:"arrow",staticStyle:{"background-image":"url('static/image/base/cell/right_arrow_gray.png')"},style:{transform:"rotate("+(e.details.Passengers[a].isOpen?90:-90)+"deg)"}})]),e._v(" "),s("div",{staticClass:"notice"},[s("div",{staticClass:"refundPrice"},[s("p",[e._v(e._s(e.$t("base.RefundFee")))]),e._v(" "),s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/details/zhushi.png')"},on:{click:function(t){e.showAlert=!0}}})]),e._v(" "),s("p",[1===e.details.RefundType?s("span",[e._v("￥0")]):t.RefundPrice>0?s("span",[e._v("￥"+e._s(t.RefundPrice))]):s("span",[e._v(e._s(e.$t("base.AirlinePassengerMaintenance")))])])]),e._v(" "),e.details.Passengers[a].isOpen?[s("div",{staticClass:"notice"},[s("p",[e._v(e._s(t.CredentialName))]),e._v(" "),s("p",[e._v(e._s(t.CredentialNo))])]),e._v(" "),s("div",{staticClass:"notice"},[s("p",[e._v(e._s(e.$t("base.Email")))]),e._v(" "),s("p",[e._v(e._s(t.Email))])]),e._v(" "),s("div",{staticClass:"notice"},[s("p",[e._v(e._s(e.$t("base.CellphoneNumber")))]),e._v(" "),s("p",[e._v(e._s(t.Mobile))])]),e._v(" "),s("div",{staticClass:"notice"},[s("p",[e._v(e._s(e.$t("base.TicketNumber")))]),e._v(" "),s("p",[e._v(e._s(t.OriginTicketNo))])]),e._v(" "),s("div",{staticClass:"notice"},[s("p",[e._v(e._s(e.$t("base.WhetherToSendARefundSuccessfulSMS")))]),e._v(" "),s("hs-switch",{model:{value:e.details.Passengers[a].IsSendRefundSms,callback:function(t){e.$set(e.details.Passengers[a],"IsSendRefundSms",t)},expression:"details.Passengers[index].IsSendRefundSms"}})],1),e._v(" "),s("div",{staticClass:"notice"},[s("p",[e._v(e._s(e.$t("base.WhetherToSendARefundSuccessfulMail")))]),e._v(" "),s("hs-switch",{model:{value:e.details.Passengers[a].IsSendRefundEmail,callback:function(t){e.$set(e.details.Passengers[a],"IsSendRefundEmail",t)},expression:"details.Passengers[index].IsSendRefundEmail"}})],1)]:e._e()],2)]):e._e()})],2),e._v(" "),s("hs-section",[s("hs-cell-1",{attrs:{value:"选择退票原因",showLogo:!1}}),e._v(" "),s("hs-cell-1",{attrs:{showLogo:!1},nativeOn:{click:function(t){e.details.RefundType=0}}},[s("div",{staticClass:"custom-cell-reason"},[s("div",{staticClass:"header"},[s("p",[e._v(e._s(e.$t("base.VoluntaryRefund")))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.details.RefundType,expression:"details.RefundType === 0"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/check-box/single.png')"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.details.RefundType,expression:"details.RefundType === 1"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/check-box/single-default.png')"}})]),e._v(" "),s("p",{staticClass:"des"},[e._v(e._s(e.$t("base.ChargeByAirlineRefundRules")))])])]),e._v(" "),s("hs-cell-1",{attrs:{showLogo:!1},nativeOn:{click:function(t){e.details.RefundType=1}}},[s("div",{staticClass:"custom-cell-reason"},[s("div",{staticClass:"header"},[s("p",[e._v(e._s(e.$t("base.InvoluntaryRefund")))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.details.RefundType,expression:"details.RefundType === 1"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/check-box/single.png')"}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.details.RefundType,expression:"details.RefundType === 0"}],staticClass:"logo",staticStyle:{"background-image":"url('static/image/base/check-box/single-default.png')"}})]),e._v(" "),s("p",{staticClass:"des"},[e._v(e._s(e.$t("base.FlightCancellationDelayForMoreThan")))])])])],1),e._v(" "),e.details.DefaultContact?s("hs-section",[s("hs-cell-1",{attrs:{value:e.$t("base.ContactInformation"),logoName:"add.png"},nativeOn:{click:function(t){e.$refs.CFrequentContacts.open()}}}),e._v(" "),e._l(e.details.ContactList,function(t,a){return s("hs-cell-1",{key:a},[s("div",{staticClass:"passenger-infor",style:{transform:"translateX("+(t.openDelete?"-65px":"0px")+")"}},[s("div",{staticClass:"left",on:{click:function(t){e._setContactsOpenDelete(!0,a)}}},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/delete.png')"}})]),e._v(" "),s("div",{staticClass:"right",on:{click:function(t){e._gotoContactsDetails(a)}}},[s("div",{staticClass:"item"},[s("p",{staticClass:"name"},[e._v(e._s(t.Name))])]),e._v(" "),s("div",{staticClass:"item"},[s("p",[e._v(e._s(e.$t("base.CellphoneNumber")))]),e._v(" "),s("p",[e._v(e._s(t.Mobile?t.Mobile:e.$t("base.Unfilled")))])]),e._v(" "),s("div",{staticClass:"item"},[s("p",[e._v(e._s(e.$t("base.Email")))]),e._v(" "),s("p",[e._v(e._s(t.Email?t.Email:e.$t("base.Unfilled")))])]),e._v(" "),s("div",{staticClass:"delete",on:{click:function(t){t.stopPropagation(),e._deleteContact(a)}}},[e._v(e._s(e.$t("base.Delete")))])])])])})],2):e._e()],1)]),e._v(" "),s("div",{staticClass:"footer"},[s("hs-button",{attrs:{width:"50%",height:"40px"},on:{click:e._gotoRefund}},[e._v(e._s(e.$t("base.Confirm")))])],1),e._v(" "),s("c-return-explain",{attrs:{details:e.returnExplainDetails},model:{value:e.showExplain,callback:function(t){e.showExplain=t},expression:"showExplain"}}),e._v(" "),s("c-contacts",{attrs:{show:e.showCContacts,datalist:e.details.ContactList,OrderBusinessType:101},on:{"update:show":function(t){e.showCContacts=t},delegate:e._contactsDelegate},model:{value:e.contactDetails,callback:function(t){e.contactDetails=t},expression:"contactDetails"}}),e._v(" "),s("c-frequent-contacts",{ref:"CFrequentContacts",attrs:{orderInit:e.details,datalist:e.details.ContactList,OrderBusinessType:101},on:{"update:orderInit":function(t){e.details=t},delegate:e._delegateWithFrequentContacts}}),e._v(" "),s("hs-alert",{attrs:{show:e.showAlert,title:e.$t("base.Tips"),content:e.$t("base.TheRefundFeeIsSubjectToTheReviewOfTheAirlineCompany"),cancelBtn:"",maskClose:""},on:{"update:show":function(t){e.showAlert=t},confirm:function(t){e.showAlert=!1}}})],1)},staticRenderFns:[]};var S=s("VU/8")(m,b,!1,function(e){s("jVNo")},"data-v-201801cb",null);t.default=S.exports},jVNo:function(e,t){}});
//# sourceMappingURL=58.e8e22340bbdc4f09e9e5.js.map