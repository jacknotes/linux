{"version":3,"sources":["webpack:///src/pages/personal/frequent-contacts/add-contacts.vue","webpack:///./src/pages/personal/frequent-contacts/add-contacts.vue?6d86","webpack:///./src/pages/personal/frequent-contacts/add-contacts.vue"],"names":["add_contacts","created","this","_getDatalist","data","tableViewOptions","pullDownRefresh","threshold","datalist","currentPageIndex","currentPageSize","travelType","KeyWord","frequentContacts","watch","val","_this","timer","clearTimeout","setTimeout","methods","_getFrequentContacts","_this2","Object","api","then","res","ResultData","_this3","pullUpLoad","params","PageIndex","PageSize","TravelType","ImportType","list","length","$refs","tableView","forceUpdate","_getDatalistMore","_this4","concat","_toggleWithDatalist","index","_this5","contactUpID","ID","Name","Mobile","Email","$toast","$t","_existence","map","v","ContactUpID","indexOf","components","CHeader","c_header","HsButton","hs_button","HsScroll","hs_scroll","HsSection","hs_section","HsCell1","hs_cell_1","frequent_contacts_add_contacts","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","isBackNav","title","fixedBackPath","_v","directives","name","rawName","value","expression","modifiers","trim","maxlength","placeholder","domProps","on","input","$event","target","composing","blur","$forceUpdate","staticStyle","background-image","click","ref","options","pulling-down","pulling-up","_l","item","key","showLogo","_s","_e","fontSize","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/47.10545f0e312cd83baaa6.js","sourcesContent":["<template>\n  <div class=\"hs-container\">\n    <c-header isBackNav :title=\"$t('base.ImportFromFrequentTraveler')\" fixedBackPath=\"/personal/frequentContacts\"></c-header>\n    <div class=\"search-bar\">\n      <div class=\"bar\">\n        <input maxlength='50' v-model.trim=\"KeyWord\" :placeholder=\"$t('base.PleaseEnterAKeywordToSearch')\"/>\n        <div class=\"logo\" style=\"background-image: url('static/image/plane-ticket/book/search.png')\" @click=\"_getDatalist\"></div>\n      </div>\n    </div>\n    <hs-scroll\n      class=\"table-view\"\n      ref=\"tableView\"\n      :data=\"datalist\"\n      :options=\"tableViewOptions\"\n      @pulling-down=\"_getDatalist\"\n      @pulling-up=\"_getDatalistMore\">\n      <ul>\n        <hs-section>\n          <hs-cell-1 v-for=\"(item, index) in datalist\" :key=\"`passengerselect${index}`\" :showLogo=\"false\">\n            <div class=\"custom-cell-contact\">\n              <div class=\"details\">\n                <div class=\"item\">\n                  <p class=\"name\">{{item.Name}}</p>\n                </div>\n                <div class=\"item\">\n                  <p>{{$t('base.CellphoneNumber')}}</p>\n                  <p>{{item.Mobile ? item.Mobile : $t('base.Unfilled')}}</p>\n                </div>\n                <div class=\"item\">\n                  <p>{{$t('base.Email')}}</p>\n                  <p>{{item.Email ? item.Email : $t('base.Unfilled')}}</p>\n                </div>\n              </div>\n              <hs-button v-if=\"!_existence(item.ID)\" fontSize=\"0.9rem\" @click=\"_toggleWithDatalist(index)\">{{$t('base.Add')}}</hs-button>\n            </div>\n          </hs-cell-1>\n        </hs-section>\n      </ul>\n    </hs-scroll>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\nimport CHeader from 'components/c-header/c-header'\nimport HsButton from 'base/hs-button/hs-button'\nimport HsScroll from 'base/hs-scroll/hs-scroll'\nimport HsSection from 'base/hs-tableview/hs-section/hs-section'\nimport HsCell1 from 'base/hs-tableview/hs-cell-1/hs-cell-1'\nimport {kpiUserGetDefaultContacts, kpiUserGetBookPersons, kpiUserAddDefaultContact} from 'api'\nexport default {\n  created() {\n    this._getDatalist()\n  },\n  data() {\n    return {\n      tableViewOptions: {\n        pullDownRefresh: {\n          threshold: 50\n        }\n      },\n      datalist: [],\n      currentPageIndex: 1,\n      currentPageSize: 20,\n      travelType: 0,\n      KeyWord: '',\n      frequentContacts: []\n    }\n  },\n  watch: {\n    KeyWord(val) {\n      this.timer && clearTimeout(this.timer) // eslint-disable-line\n      this.timer = setTimeout(() => {\n        this._getDatalist()\n      }, 1000)\n    }\n  },\n  methods: {\n    _getFrequentContacts() {\n      kpiUserGetDefaultContacts().then((res) => {\n        console.log('获取常用联系人列表: ', res)\n        this.frequentContacts = res.ResultData\n      })\n    },\n    _getDatalist() {\n      this._getFrequentContacts()\n      this.currentPageIndex = 1\n      this.tableViewOptions.pullUpLoad = false\n      let params = {\n        KeyWord: this.KeyWord,\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        TravelType: this.travelType,\n        ImportType: 0 // 联系人\n      }\n      kpiUserGetBookPersons(params).then((res) => {\n        console.log('常旅客列表： ', res)\n        let list = res.ResultData\n        this.datalist = list\n        if (res.ResultData.length >= this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    _getDatalistMore() {\n      this.currentPageIndex++\n      let params = {\n        KeyWord: this.KeyWord,\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        TravelType: this.travelType,\n        ImportType: 0 // 联系人\n      }\n      kpiUserGetBookPersons(params).then((res) => {\n        console.log('常旅客列表： ', res)\n        let list = res.ResultData\n        this.datalist = this.datalist.concat(list)\n        if (res.ResultData.length < this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = false\n        } else {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    // _toggleWithFrequentContacts(index) {\n    //   let params = {\n    //     id: this.frequentContacts[index].ID\n    //   }\n    //   kpiUserDeleteDefaultContact(params).then((res) => {\n    //     console.log('删除常用联系人: ', res)\n    //     if (res.ResultData) {\n    //       this._getFrequentContacts()\n    //     } else {\n    //       this.$toast('移除失败，请稍后再试')\n    //     }\n    //   })\n    // },\n    _toggleWithDatalist(index) {\n      let params = {\n        contactUpID: this.datalist[index].ID,\n        Name: this.datalist[index].Name,\n        Mobile: this.datalist[index].Mobile,\n        Email: this.datalist[index].Email\n      }\n      kpiUserAddDefaultContact(params).then((res) => {\n        console.log('新增常用联系人: ', res)\n        if (res.ResultData) {\n          this._getFrequentContacts()\n        } else {\n          this.$toast(this.$t('TM.AddFailed'))\n        }\n      })\n    },\n    _existence(ID) {\n      let index = this.frequentContacts.map(v => v.ContactUpID).indexOf(ID)\n      return index >= 0\n    }\n  },\n  components: {\n    CHeader,\n    HsButton,\n    HsScroll,\n    HsSection,\n    HsCell1\n  }\n}\n</script>\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n@import '~common/stylus/base'\n@import '~common/stylus/variable'\n.hs-container\n  width 100%\n  height 100%\n  >.search-bar\n    @extend .flex-center\n    width 100%\n    padding 5px 15px\n    background-color $color_white\n    >.bar\n      @extend .flex-row\n      @extend .flex-between\n      width 100%\n      border-radius 4px\n      border 1px solid $color_gray_layer\n      padding 10px\n      background-color $color_white\n      font-size 0.9rem\n      >input\n        width calc(100% - 30px)\n        height 100%\n      >.logo\n        width 20px\n        height 20px\n        background-size 100% 100%\n  .table-view\n    width 100%\n    height calc(100% - 45px - 52px)\n    overflow hidden\n    background-color $color_white\n    .custom-cell-contact\n      @extend .flex-row\n      @extend .flex-between\n      width 100%\n      padding 12px 0\n      >.details\n        width calc(100% - 80px)\n        >.item\n          @extend .flex-row\n          @extend .flex-start\n          width 100%\n          >.name\n            @extend .flex-row\n            @extend .flex-start\n            width 100% !important\n            font-size 0.9rem\n            color $color_black_text_0\n            margin-bottom 5px\n            font-weight bold\n          >p\n            font-size 0.8rem\n            line-height 1.5em\n            color $color_gray_text\n            &:nth-child(1)\n              width 60px\n              margin-right 10px\n            &:nth-child(2)\n              width calc(100% - 70px)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/personal/frequent-contacts/add-contacts.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hs-container\"},[_c('c-header',{attrs:{\"isBackNav\":\"\",\"title\":_vm.$t('base.ImportFromFrequentTraveler'),\"fixedBackPath\":\"/personal/frequentContacts\"}}),_vm._v(\" \"),_c('div',{staticClass:\"search-bar\"},[_c('div',{staticClass:\"bar\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.KeyWord),expression:\"KeyWord\",modifiers:{\"trim\":true}}],attrs:{\"maxlength\":\"50\",\"placeholder\":_vm.$t('base.PleaseEnterAKeywordToSearch')},domProps:{\"value\":(_vm.KeyWord)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.KeyWord=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_vm._v(\" \"),_c('div',{staticClass:\"logo\",staticStyle:{\"background-image\":\"url('static/image/plane-ticket/book/search.png')\"},on:{\"click\":_vm._getDatalist}})])]),_vm._v(\" \"),_c('hs-scroll',{ref:\"tableView\",staticClass:\"table-view\",attrs:{\"data\":_vm.datalist,\"options\":_vm.tableViewOptions},on:{\"pulling-down\":_vm._getDatalist,\"pulling-up\":_vm._getDatalistMore}},[_c('ul',[_c('hs-section',_vm._l((_vm.datalist),function(item,index){return _c('hs-cell-1',{key:(\"passengerselect\" + index),attrs:{\"showLogo\":false}},[_c('div',{staticClass:\"custom-cell-contact\"},[_c('div',{staticClass:\"details\"},[_c('div',{staticClass:\"item\"},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(item.Name))])]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('p',[_vm._v(_vm._s(_vm.$t('base.CellphoneNumber')))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.Mobile ? item.Mobile : _vm.$t('base.Unfilled')))])]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('p',[_vm._v(_vm._s(_vm.$t('base.Email')))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.Email ? item.Email : _vm.$t('base.Unfilled')))])])]),_vm._v(\" \"),(!_vm._existence(item.ID))?_c('hs-button',{attrs:{\"fontSize\":\"0.9rem\"},on:{\"click\":function($event){_vm._toggleWithDatalist(index)}}},[_vm._v(_vm._s(_vm.$t('base.Add')))]):_vm._e()],1)])}))],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5928ea5b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/personal/frequent-contacts/add-contacts.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5928ea5b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add-contacts.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add-contacts.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add-contacts.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5928ea5b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add-contacts.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5928ea5b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/personal/frequent-contacts/add-contacts.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}