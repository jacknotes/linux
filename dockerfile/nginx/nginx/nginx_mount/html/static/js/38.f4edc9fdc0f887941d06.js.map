{"version":3,"sources":["webpack:///src/pages/train/order/order-list/order-list.vue","webpack:///./src/pages/train/order/order-list/order-list.vue?0d66","webpack:///./src/pages/train/order/order-list/order-list.vue"],"names":["order_list","beforeRouteEnter","to","from","next","vm","path","travelType","orderStatus","PsgName","_getDatalist","Number","$route","params","TravelType","query","name","datalist","length","beforeRouteLeave","this","$router","replace","dataStatus","activated","eventBus","$off","$on","bind","data","tableViewOptions","pullDownRefresh","threshold","pullUpLoad","currentPageIndex","currentPageSize","filters","OrderStatus","val","vue_esm","prototype","$t","watch","index","title","_this","timer","clearTimeout","setTimeout","methods","_this2","StartDate","beTimeNumber","beTime","Date","setMonth","getMonth","EndDate","PageIndex","PageSize","Status","Object","api","then","res","ResultData","Orders","$refs","tableView","forceUpdate","_getNextData","_this3","concat","_tabDelegate","_gotoDetails","Id","push","isOwner","_gotoPay","item","_this4","$alert","content","cancelTxt","confirmFn","Pay","gotoPay","OrderBusinessType","OrderID","PayWay","CallbackPathName","_cancel","_this5","orderID","$toast","components","CHeader","c_header","HsTab","hs_tab","HsScroll","hs_scroll","HsSection","hs_section","HsCell1","hs_cell_1","HsNull","hs_null","pay","order_list_order_list","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","isBackNav","fixedBackPath","slot","_v","_s","on","click","$event","style","transform","directives","rawName","value","expression","modifiers","trim","maxlength","placeholder","domProps","input","target","composing","blur","$forceUpdate","staticStyle","background-image","selectedIndex","options","select","ref","pulling-down","pulling-up","noValue","JSON","stringify","_l","key","CreateDate","_e","itemChild","indexChild","DepartStationName","ArrivalStationName","TrainCode","DepartDate","margin-bottom","Names","TotalPrice","_f","PageBtnInfo","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/38.f4edc9fdc0f887941d06.js","sourcesContent":["<template>\n<div class=\"hs-container\">\n  <c-header isBackNav fixedBackPath=\"/personal/center\">\n    <div slot=\"middle\" class=\"header-title\">\n      <p>{{$t('base.TrainOrders')}}</p>\n    </div>\n    <div slot=\"right\" class=\"header-right\">\n      <div class=\"travelTypeSwitch\" @click=\"travelType = travelType === 0 ? 1: 0\">\n        <div :style=\"{transform: `translateX(${travelType == 0 ? '0px' : '20px'})`}\">\n          <p>{{travelType === 0 ? $t('base.B') : $t('base.P')}}</p>\n        </div>\n      </div>\n    </div>\n  </c-header>\n  <div class=\"search-bar\">\n    <div class=\"bar\">\n      <input maxlength='50' v-model.trim=\"PsgName\" :placeholder=\"$t('base.PleaseEnterThePassengerNameToSearch')\"/>\n      <div class=\"logo\" style=\"background-image: url('static/image/plane-ticket/book/search.png')\" @click=\"_getDatalist\"></div>\n    </div>\n  </div>\n  <hs-tab :selectedIndex=\"orderStatus\" :options=\"[$t('base.All'), $t('base.PendForOperating'), $t('base.Operating'), $t('base.Finished'), $t('base.Cancelled')]\" @select=\"_tabDelegate\"></hs-tab>\n  <hs-scroll\n    class=\"table-view\"\n    ref=\"tableView\"\n    :data=\"datalist\"\n    :options=\"tableViewOptions\"\n    @pulling-down=\"_getDatalist\"\n    @pulling-up=\"_getNextData\">\n    <hs-null v-if=\"noValue(JSON.stringify(datalist))\"> </hs-null>\n    <ul v-else>\n      <div class=\"custom-cell\" v-for=\"(item, index) in datalist\" :key=\"index\" @click=\"_gotoDetails(item.OrderID)\">\n        <div class=\"header\" v-if=\"index === 0 || (index > 0 && (beTime(item.CreateDate, 'MM-dd') !== beTime(datalist[index - 1].CreateDate, 'MM-dd')))\">\n          <p>\n            {{$t('base.OrderDate')}}:\n            {{$t(beTime(item.CreateDate), 'date', beTime(item.CreateDate, 'yyyy') === beTime(new Date(), 'yyyy') ? ['MM-dd', 'MM dd'] : ['yyyy-MM-dd', 'MM dd, yyyy'])}}\n          </p>\n          <!-- <p class=\"change\" v-if=\"item.OriginOrderID\">{{$t('base.C')}}</p> -->\n        </div>\n        <div class=\"content\">\n          <div class=\"information\">\n            <div class=\"left\">\n              <div class=\"logo\" :style=\"{'background-image': `url('static/image/personal-center/changeTrain.png')`}\" v-if=\"item.OriginOrderID\"></div>\n              <div class=\"logo\" :style=\"{'background-image': `url('static/image/personal-center/train.png')`}\" v-else></div>\n            </div>\n            <div class=\"details\">\n              <div class=\"blank\" v-for=\"(itemChild, indexChild) in item.Routes\" :key=\"indexChild\">\n                <p class=\"title\">{{itemChild.DepartStationName}} - {{itemChild.ArrivalStationName}}</p>\n                <p>{{itemChild.TrainCode}}&nbsp;&nbsp;{{beTime(itemChild.DepartDate, 'yyyy-MM-dd hh:mm')}}</p>\n                <p style=\"margin-bottom: 0px\">{{$t('base.Passenger')}}:&nbsp;{{item.Names}}</p>\n              </div>\n            </div>\n            <div class=\"right\">\n              <p class=\"price\">￥{{item.TotalPrice}}</p>\n              <p class=\"status\">{{item.OrderStatus | OrderStatus}}</p>\n            </div>\n          </div>\n          <div class=\"btns\">\n            <!-- <p v-if=\"(item.SettlementType === $t('base.SettleNow') && Number(item.PayStatus) === 0) && (Number(item.VettingStatus) === 0 || Number(item.VettingStatus) === 5) && Number(item.OrderStatus) === 1\" @click.stop=\"_gotoPay(item)\">{{$t('base.Pay')}}</p>\n            <p v-if=\"Number(item.OrderStatus) === 1 || Number(item.OrderStatus) === 2 || Number(item.OrderStatus) === 8 || Number(item.OrderStatus) === 9\" @click.stop=\"_cancel(item)\">{{$t('base.Cancel')}}</p> -->\n            <p v-if=\"item.PageBtnInfo.IsAllowPay\" @click.stop=\"_gotoPay(item)\">{{$t('base.Pay')}}</p>\n            <p v-if=\"item.PageBtnInfo.IsAllowCancel\" @click.stop=\"_cancel(item)\">{{$t('base.Cancel')}}</p>\n          </div>\n        </div>\n      </div>\n      <p class=\"allLoadedTxt\" v-if=\"!tableViewOptions.pullUpLoad\">{{$t('base.AllOrdersForRecentSixMonths')}}</p>\n    </ul>\n  </hs-scroll>\n  <pay ref=\"Pay\"></pay>\n</div>\n</template>\n<script type='text/ecmascript-6'>\nimport Vue from 'vue'\nimport CHeader from 'components/c-header/c-header'\nimport HsTab from 'base/hs-tab/hs-tab'\nimport HsScroll from 'base/hs-scroll/hs-scroll'\nimport HsSection from 'base/hs-tableview/hs-section/hs-section'\nimport HsCell1 from 'base/hs-tableview/hs-cell-1/hs-cell-1'\nimport HsNull from 'base/hs-null/hs-null'\nimport Pay from 'pages/pay/pay'\nimport {kpiTrainOrderList, kpiTrainCancle} from 'api'\nimport eventBus from 'common/js/eventBus.js'\nexport default {\n  beforeRouteEnter(to, from, next) {\n    // console.log('订单列表from: ', from)\n    next(vm => {\n      // console.log('改签弹出', from.path)\n      if (from.path === '/' || from.path === '/personal/center') {\n        vm.travelType = 0\n        vm.orderStatus = 0\n        vm.PsgName === '' ? vm._getDatalist() : (vm.PsgName = '')\n      } else if (from.path === '/train/bookConfirm') {\n        vm.travelType = Number(vm.$route.params.TravelType) === 1 ? 1 : 0\n        vm._getDatalist()\n      } else if (from.path === '/train/changeRefund') {\n        vm.orderStatus = 0\n        vm.travelType = Number(from.query.TravelType) === 1 ? 1 : 0\n        vm._getDatalist()\n      } else if (from.name === 'TrainOrderDetail') {\n        vm.travelType = Number(vm.$route.params.TravelType) === 1 ? 1 : 0\n        vm._getDatalist()\n      } else if (!vm.datalist || vm.datalist.length === 0) {\n        vm._getDatalist()\n      }\n    })\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === '/train/trainQueryList') {\n      this.$router.replace('/personal/center')\n      this.travelType = 0\n      this.dataStatus = 0\n    } else {\n      next()\n    }\n  },\n  activated() {\n    // if (Number(this.$route.params.TravelType) === 1) {\n    //   this.travelType = 1;\n    // } else {\n    //   this.travelType = 0;\n    // }\n    eventBus.$off()\n    eventBus.$on('refresh', function () {\n      this._getDatalist()\n    }.bind(this))\n    // this._getDatalist()\n  },\n  data() {\n    return {\n      datalist: [],\n      travelType: 0,\n      tableViewOptions: {\n        pullDownRefresh: {\n          threshold: 50\n        },\n        pullUpLoad: false\n      },\n      currentPageIndex: 1,\n      currentPageSize: 10,\n      PsgName: '',\n      orderStatus: 0\n    }\n  },\n  filters: {\n    OrderStatus(val) {\n      switch (val) {\n        case -1:\n          return Vue.prototype.$t('base.Unknown')\n        case 1:\n          return Vue.prototype.$t('base.BookingSucceed')\n        case 2:\n          return Vue.prototype.$t('base.ApplyForTicketing')\n        case 3:\n          return Vue.prototype.$t('base.WaitingForTicketing')\n        case 4:\n          return Vue.prototype.$t('base.Ticketing')\n        case 5:\n          return Vue.prototype.$t('base.TicketingSucceed')\n        case 6:\n          return Vue.prototype.$t('base.UserCanceled')\n        case 7:\n          return Vue.prototype.$t('base.NoticeCanceled')\n        case 8:\n          return Vue.prototype.$t('base.Unsubmitted')\n        case 9:\n          return Vue.prototype.$t('base.TicketingFailed')\n        case 10:\n          return Vue.prototype.$t('base.Refunding')\n        case 11:\n          return Vue.prototype.$t('base.PartialRefund')\n        case 12:\n          return Vue.prototype.$t('base.Refunded')\n        case 13:\n          return Vue.prototype.$t('base.Changing')\n        case 14:\n          return Vue.prototype.$t('base.PartialChange')\n        case 15:\n          return Vue.prototype.$t('base.ChangeSucceed')\n        case 16:\n          return Vue.prototype.$t('base.RefundFailed')\n        default:\n          break;\n      }\n    }\n  },\n  watch: {\n    travelType(index) {\n      this._getDatalist()\n    },\n    PsgName(title) {\n      this.timer && clearTimeout(this.timer)\n      this.timer = setTimeout(() => {\n        this._getDatalist()\n      })\n    }\n  },\n  methods: {\n    /** 获取订单列表 */\n    _getDatalist() {\n      this.datalist = []\n      this.currentPageIndex = 1\n      this.tableViewOptions.pullUpLoad = false\n      let params = {\n        StartDate: this.beTimeNumber(this.beTime(new Date().setMonth(new Date().getMonth() - 6))),\n        EndDate: this.beTimeNumber(this.beTime(new Date())),\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        Status: this.orderStatus,\n        TravelType: this.travelType,\n        PsgName: this.PsgName\n      }\n      kpiTrainOrderList(params).then((res) => {\n        console.log('火车票订单列表: ', res)\n        this.datalist = res.ResultData.Orders\n        if (res.ResultData.Orders.length >= this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    /** 获取更多订单列表 */\n    _getNextData() {\n      this.currentPageIndex++\n      let params = {\n        StartDate: this.beTimeNumber(this.beTime(new Date().setMonth(new Date().getMonth() - 6))),\n        EndDate: this.beTimeNumber(this.beTime(new Date())),\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        Status: this.orderStatus,\n        TravelType: this.travelType,\n        PsgName: this.PsgName\n      }\n      kpiTrainOrderList(params, true).then((res) => {\n        console.log('火车票订单列表: ', res)\n        this.datalist = this.datalist.concat(res.ResultData.Orders)\n        if (res.ResultData.Orders.length < this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = false\n        } else {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    // _backHome() {\n    //   this.$router.replace('/home')\n    // },\n    _tabDelegate(index) {\n      if (this.orderStatus !== index) {\n        this.orderStatus = index\n        this._getDatalist()\n      }\n    },\n    _gotoDetails(Id) {\n      this.$router.push({path: '/train/orderDetail', query: {Id: Id, isOwner: true}})\n    },\n    /** 支付 */\n    _gotoPay(item) {\n      this.$alert({\n        content: this.$t('TM.AreYouSureToPayForThisOrder'),\n        cancelTxt: this.$t('base.Cancel'),\n        confirmFn: () => {\n          this.$refs.Pay && this.$refs.Pay.gotoPay({\n            OrderBusinessType: 10,\n            OrderID: item.OrderID,\n            PayWay: 3,\n            TravelType: Number(this.TravelType),\n            CallbackPathName: 'TrainOrderInforList'\n          })\n        }\n      })\n    },\n    /** 取消 */\n    _cancel(item) {\n      this.$alert({\n        content: this.$t('TM.AreYouSureToCancelTheOrder'),\n        cancelTxt: this.$t('base.Cancel'),\n        confirmFn: () => {\n          let params = {\n            orderID: item.OrderID\n          }\n          kpiTrainCancle(params).then((res) => {\n            if (res.ResultData === true) {\n              this.$toast(this.$t('TM.OrderCancelled'))\n              this._getDatalist()\n            } else {\n              this.$toast(this.$t('TM.OrderCancelFailed'))\n            }\n          })\n        }\n      })\n    }\n  },\n  components: {\n    CHeader,\n    HsTab,\n    HsScroll,\n    HsSection,\n    HsCell1,\n    HsNull,\n    eventBus,\n    Pay\n  }\n}\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n@import '~common/stylus/base'\n@import '~common/stylus/variable'\n.hs-container\n  width 100%\n  height 100%\n  .header-title\n    @extend .flex-row\n    @extend .flex-center\n    >p\n      &:nth-child(1)\n        font-size 1.1rem\n        font-weight bold\n      &:nth-child(2)\n        font-size 0.6rem\n        color $color_gray_text\n        line-height 1.5em\n  .header-right\n    @extend .flex-end\n    @extend .flex-row\n    width 100%\n    >.travelTypeSwitch\n      @extend .flex-row\n      @extend .flex-start\n      width 100%\n      width 50px\n      height 30px\n      border 1px solid $color_theme\n      background-color $color_theme\n      border-radius 15px\n      >div\n        @extend .flex-center\n        width 28px\n        height 28px\n        border-radius 14px\n        transition all 400ms\n        background-color $color_white\n        >p\n          font-size 0.8 rem\n          color $color_theme\n  >.search-bar\n    @extend .flex-center\n    width 100%\n    padding 5px 15px\n    background-color $color_white\n    >.bar\n      @extend .flex-row\n      @extend .flex-between\n      width 100%\n      border-radius 4px\n      border 1px solid $color_gray_layer\n      padding 10px\n      background-color $color_white\n      font-size 0.9rem\n      >input\n        width calc(100% - 30px)\n        height 100%\n      >.logo\n        width 20px\n        height 20px\n        background-size 100% 100%\n  .table-view\n    width 100%\n    height calc(100% - 45px - 40px - 52px)\n    overflow hidden\n    .custom-cell\n      width 100%\n      padding 15px 10px\n      padding-bottom 0px\n      >.header\n        @extend .flex-row\n        @extend .flex-start\n        width 100%\n        margin-bottom 10px\n        >p\n          background-color $color_red_background_1\n          color $color_white\n          font-size 0.8rem\n          line-height 20px\n          border-radius 10px\n          padding 0 10px\n          margin-right 10px\n        >.change\n          background-color $color_orange_text\n      >.content\n        width 100%\n        background-color $color_white\n        border-radius 3px\n        padding 10px\n        box-shadow 0 0 10px $color_gray_layer\n        >.information\n          @extend .flex-row\n          @extend .flex-start\n          @extend .flex-top\n          width 100%\n          >.left\n            width 30px\n            padding 10px 0\n            >.logo\n              width 20px\n              height 20px\n              background-size 100% 100%\n          >.details\n            width calc(100% - 100px)\n            >.blank\n              width 100%\n              padding 10px 0\n              >.title\n                @extend .flex-row\n                @extend .flex-start\n                width 100%\n                line-height 20px\n                font-size 1.1rem\n                color $color_black_text_0\n                font-weight bold\n                margin-bottom 12px\n              >p\n                width 100%\n                font-size 0.9rem\n                color $color_black_text_1\n                margin-bottom 10px\n                line-height 1.2em\n              >.row\n                @extend .flex-row\n                @extend .flex-start\n                width 100%\n                margin-bottom 10px\n                >.logo\n                  width 15px\n                  height 15px\n                  background-size 100% 100%\n                  margin-right 5px\n                >p\n                  font-size 0.9rem\n                  color $color_black_text_1\n          >.right\n            @extend .flex-column\n            @extend .flex-bottom\n            width 70px\n            padding 10px 0\n            >.price\n              @extend .flex-row\n              @extend .flex-end\n              line-height 20px\n              font-size 1rem\n              font-weight bold\n              color $color_theme\n              margin-bottom 10px\n            >.status\n              font-size 0.7rem\n              color $color_orange_text\n        >.btns\n          @extend .flex-row\n          @extend .flex-end\n          width 100%\n          >p\n            @extend .flex-center\n            color $color_black_text_1\n            height 30px\n            border-radius 15px\n            padding 0 15px\n            background-color $color_gray_background_0\n            font-size 0.9rem\n            margin-left 10px\n    .allLoadedTxt\n      @extend .flex-center\n      width 100%\n      height 40px\n      font-size 0.8rem\n      color $color_black_text_1\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/train/order/order-list/order-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hs-container\"},[_c('c-header',{attrs:{\"isBackNav\":\"\",\"fixedBackPath\":\"/personal/center\"}},[_c('div',{staticClass:\"header-title\",attrs:{\"slot\":\"middle\"},slot:\"middle\"},[_c('p',[_vm._v(_vm._s(_vm.$t('base.TrainOrders')))])]),_vm._v(\" \"),_c('div',{staticClass:\"header-right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"travelTypeSwitch\",on:{\"click\":function($event){_vm.travelType = _vm.travelType === 0 ? 1: 0}}},[_c('div',{style:({transform: (\"translateX(\" + (_vm.travelType == 0 ? '0px' : '20px') + \")\")})},[_c('p',[_vm._v(_vm._s(_vm.travelType === 0 ? _vm.$t('base.B') : _vm.$t('base.P')))])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"search-bar\"},[_c('div',{staticClass:\"bar\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.PsgName),expression:\"PsgName\",modifiers:{\"trim\":true}}],attrs:{\"maxlength\":\"50\",\"placeholder\":_vm.$t('base.PleaseEnterThePassengerNameToSearch')},domProps:{\"value\":(_vm.PsgName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.PsgName=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_vm._v(\" \"),_c('div',{staticClass:\"logo\",staticStyle:{\"background-image\":\"url('static/image/plane-ticket/book/search.png')\"},on:{\"click\":_vm._getDatalist}})])]),_vm._v(\" \"),_c('hs-tab',{attrs:{\"selectedIndex\":_vm.orderStatus,\"options\":[_vm.$t('base.All'), _vm.$t('base.PendForOperating'), _vm.$t('base.Operating'), _vm.$t('base.Finished'), _vm.$t('base.Cancelled')]},on:{\"select\":_vm._tabDelegate}}),_vm._v(\" \"),_c('hs-scroll',{ref:\"tableView\",staticClass:\"table-view\",attrs:{\"data\":_vm.datalist,\"options\":_vm.tableViewOptions},on:{\"pulling-down\":_vm._getDatalist,\"pulling-up\":_vm._getNextData}},[(_vm.noValue(JSON.stringify(_vm.datalist)))?_c('hs-null'):_c('ul',[_vm._l((_vm.datalist),function(item,index){return _c('div',{key:index,staticClass:\"custom-cell\",on:{\"click\":function($event){_vm._gotoDetails(item.OrderID)}}},[(index === 0 || (index > 0 && (_vm.beTime(item.CreateDate, 'MM-dd') !== _vm.beTime(_vm.datalist[index - 1].CreateDate, 'MM-dd'))))?_c('div',{staticClass:\"header\"},[_c('p',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('base.OrderDate'))+\":\\n            \"+_vm._s(_vm.$t(_vm.beTime(item.CreateDate), 'date', _vm.beTime(item.CreateDate, 'yyyy') === _vm.beTime(new Date(), 'yyyy') ? ['MM-dd', 'MM dd'] : ['yyyy-MM-dd', 'MM dd, yyyy']))+\"\\n          \")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"information\"},[_c('div',{staticClass:\"left\"},[(item.OriginOrderID)?_c('div',{staticClass:\"logo\",style:({'background-image': \"url('static/image/personal-center/changeTrain.png')\"})}):_c('div',{staticClass:\"logo\",style:({'background-image': \"url('static/image/personal-center/train.png')\"})})]),_vm._v(\" \"),_c('div',{staticClass:\"details\"},_vm._l((item.Routes),function(itemChild,indexChild){return _c('div',{key:indexChild,staticClass:\"blank\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(itemChild.DepartStationName)+\" - \"+_vm._s(itemChild.ArrivalStationName))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(itemChild.TrainCode)+\"  \"+_vm._s(_vm.beTime(itemChild.DepartDate, 'yyyy-MM-dd hh:mm')))]),_vm._v(\" \"),_c('p',{staticStyle:{\"margin-bottom\":\"0px\"}},[_vm._v(_vm._s(_vm.$t('base.Passenger'))+\": \"+_vm._s(item.Names))])])})),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('p',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(item.TotalPrice))]),_vm._v(\" \"),_c('p',{staticClass:\"status\"},[_vm._v(_vm._s(_vm._f(\"OrderStatus\")(item.OrderStatus)))])])]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[(item.PageBtnInfo.IsAllowPay)?_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm._gotoPay(item)}}},[_vm._v(_vm._s(_vm.$t('base.Pay')))]):_vm._e(),_vm._v(\" \"),(item.PageBtnInfo.IsAllowCancel)?_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm._cancel(item)}}},[_vm._v(_vm._s(_vm.$t('base.Cancel')))]):_vm._e()])])])}),_vm._v(\" \"),(!_vm.tableViewOptions.pullUpLoad)?_c('p',{staticClass:\"allLoadedTxt\"},[_vm._v(_vm._s(_vm.$t('base.AllOrdersForRecentSixMonths')))]):_vm._e()],2)],1),_vm._v(\" \"),_c('pay',{ref:\"Pay\"})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-78575f2b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/train/order/order-list/order-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-78575f2b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./order-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./order-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./order-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78575f2b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./order-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-78575f2b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/train/order/order-list/order-list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}