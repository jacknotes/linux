{"version":3,"sources":["webpack:///src/pages/personal/refund/refund-list/refund-list.vue","webpack:///./src/pages/personal/refund/refund-list/refund-list.vue?90b5","webpack:///./src/pages/personal/refund/refund-list/refund-list.vue"],"names":["refund_list","components","CHeader","c_header","HsTab","hs_tab","HsScroll","hs_scroll","HsSection","hs_section","HsCell1","hs_cell_1","HsNull","hs_null","activated","this","travelType","Number","$route","params","TravelType","eventBus","$off","$on","_getDatalist","bind","data","tableViewOptions","pullDownRefresh","threshold","pullUpLoad","datalist","dataStatus","currentPageIndex","currentPageSize","PsgName","watch","val","_this","timer","clearTimeout","setTimeout","filters","filterRefundStatus","vue_esm","prototype","$t","methods","_tabDelegate","status","_this2","StartDate","beTimeNumber","beTime","Date","setMonth","getMonth","EndDate","PageIndex","PageSize","Status","Object","api","then","res","ResultData","Orders","length","$refs","tableView","forceUpdate","_getDatalistMore","_this3","concat","_gotoDetails","Id","$router","push","path","query","_cancel","item","_this4","$alert","content","cancelTxt","confirmFn","id","ID","$toast","beforeRouteEnter","to","from","next","vm","refund_list_refund_list","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","isBackNav","title","fixedBackPath","slot","on","click","$event","style","transform","_v","_s","directives","name","rawName","value","expression","maxlength","placeholder","domProps","input","target","composing","staticStyle","background-image","options","select","ref","pulling-down","pulling-up","noValue","JSON","stringify","_l","index","key","RefundDate","_e","itemChild","indexChild","DepartureCityName","ArrivalCityName","DepartDate","AirLine","FlightNo","margin-bottom","PassengerName","RefundStatus","RefundToGuestAmount","_f","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2OA2EAA,GACAC,YACAC,QAAAC,EAAA,EACAC,MAAAC,EAAA,EACAC,SAAAC,EAAA,EACAC,UAAAC,EAAA,EACAC,QAAAC,EAAA,EACAC,OAAAC,EAAA,GAEAC,UATA,WAUAC,KAAAC,WAAA,IAAAC,OAAAF,KAAAG,OAAAC,OAAAC,YAAA,IACAC,EAAA,EAAAC,KAAA,WACAD,EAAA,EAAAE,IAAA,qBACAR,KAAAS,gBACAC,KAAAV,QAEAW,KAhBA,WAiBA,OACAC,kBACAC,iBACAC,UAAA,IAEAC,YAAA,GAEAC,YACAC,WAAA,EACAC,iBAAA,EACAC,gBAAA,GACAlB,WAAA,EACAmB,QAAA,KAGAC,OACApB,WADA,WAEAD,KAAAS,gBAEAW,QAJA,SAIAE,GAAA,IAAAC,EAAAvB,KACAA,KAAAwB,OAAAC,aAAAzB,KAAAwB,OACAxB,KAAAwB,MAAAE,WAAA,WACAH,EAAAd,gBACA,OAGAkB,SACAC,mBADA,SACAN,GACA,OAAAA,GACA,OACA,OAAAO,EAAA,EAAAC,UAAAC,GAAA,wBACA,OACA,OAAAF,EAAA,EAAAC,UAAAC,GAAA,cACA,OACA,OAAAF,EAAA,EAAAC,UAAAC,GAAA,kBACA,OACA,OAAAF,EAAA,EAAAC,UAAAC,GAAA,sBACA,OACA,OAAAF,EAAA,EAAAC,UAAAC,GAAA,qBACA,OACA,OAAAF,EAAA,EAAAC,UAAAC,GAAA,uBACA,QACA,OAAAF,EAAA,EAAAC,UAAAC,GAAA,mBAIAC,SACAC,aADA,SACAC,GACAlC,KAAAiB,aAAAiB,IACAlC,KAAAiB,WAAAiB,EACAlC,KAAAS,iBAIAA,aARA,WAQA,IAAA0B,EAAAnC,KACAA,KAAAgB,YACAhB,KAAAkB,iBAAA,EACAlB,KAAAY,iBAAAG,YAAA,EACA,IAAAX,GACAgC,UAAApC,KAAAqC,aAAArC,KAAAsC,QAAA,IAAAC,MAAAC,UAAA,IAAAD,MAAAE,WAAA,KACAC,QAAA1C,KAAAqC,aAAArC,KAAAsC,OAAA,IAAAC,OACAI,UAAA3C,KAAAkB,iBACA0B,SAAA5C,KAAAmB,gBACA0B,OAAA7C,KAAAiB,WACAZ,WAAAL,KAAAC,WACAmB,QAAApB,KAAAoB,SAEA0B,OAAAC,EAAA,EAAAD,CAAA1C,GAAA4C,KAAA,SAAAC,GAEAd,EAAAnB,SAAAiC,EAAAC,WAAAC,OACAF,EAAAC,WAAAC,OAAAC,QAAAjB,EAAAhB,kBACAgB,EAAAvB,iBAAAG,YAAAD,UAAA,KAEAqB,EAAAkB,MAAAC,WAAAnB,EAAAkB,MAAAC,UAAAC,iBAIAC,iBA/BA,WA+BA,IAAAC,EAAAzD,KACAA,KAAAkB,mBACA,IAAAd,GACAgC,UAAApC,KAAAqC,aAAArC,KAAAsC,QAAA,IAAAC,MAAAC,UAAA,IAAAD,MAAAE,WAAA,KACAC,QAAA1C,KAAAqC,aAAArC,KAAAsC,OAAA,IAAAC,OACAI,UAAA3C,KAAAkB,iBACA0B,SAAA5C,KAAAmB,gBACA0B,OAAA7C,KAAAiB,WACAZ,WAAAL,KAAAC,WACAmB,QAAApB,KAAAoB,SAEA0B,OAAAC,EAAA,EAAAD,CAAA1C,GAAA4C,KAAA,SAAAC,GAEAQ,EAAAzC,SAAAyC,EAAAzC,SAAA0C,OAAAT,EAAAC,WAAAC,QACAF,EAAAC,WAAAC,OAAAC,OAAAK,EAAAtC,gBACAsC,EAAA7C,iBAAAG,YAAA,EAEA0C,EAAA7C,iBAAAG,YAAAD,UAAA,IAEA2C,EAAAJ,MAAAC,WAAAG,EAAAJ,MAAAC,UAAAC,iBAGAI,aArDA,SAqDAC,GACA5D,KAAA6D,QAAAC,MAAAC,KAAA,0BAAAC,OAAAJ,SAGAK,QAzDA,SAyDAC,GAAA,IAAAC,EAAAnE,KACAA,KAAAoE,QACAC,QAAArE,KAAA+B,GAAA,iCACAuC,UAAAtE,KAAA+B,GAAA,eACAwC,UAAA,WACA,IAAAnE,GACAoE,GAAAN,EAAAO,IAEA3B,OAAAC,EAAA,EAAAD,CAAA1C,GAAA4C,KAAA,SAAAC,IACA,IAAAA,EAAAC,YACAiB,EAAAO,OAAAP,EAAApC,GAAA,sBACAoC,EAAA1D,gBAEA0D,EAAAO,OAAAP,EAAApC,GAAA,gCAOA4C,iBA5IA,SA4IAC,EAAAC,EAAAC,GAEAA,EAAA,SAAAC,GACA,MAAAF,EAAAd,MAAA,qBAAAc,EAAAd,MACAgB,EAAA9E,WAAA,EACA8E,EAAA9D,WAAA,EACA8D,EAAAtE,gBACA,8BAAAoE,EAAAd,MACAgB,EAAA9E,WAAA,IAAAC,OAAA6E,EAAA5E,OAAAC,OAAAC,YAAA,IACA0E,EAAAtE,gBACAsE,EAAA/D,UAAA,IAAA+D,EAAA/D,SAAAoC,QACA2B,EAAAtE,mBC/NAuE,GADiBC,OAFjB,WAA0B,IAAAC,EAAAlF,KAAamF,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iBAA2BF,EAAA,YAAiBG,OAAOC,UAAA,GAAAC,MAAAR,EAAAnD,GAAA,uBAAA4D,cAAA,sBAAyFN,EAAA,OAAYE,YAAA,iBAAAC,OAAoCI,KAAA,SAAeA,KAAA,UAAcP,EAAA,OAAYE,YAAA,mBAAAM,IAAmCC,MAAA,SAAAC,GAAyBb,EAAAjF,WAAA,IAAAiF,EAAAjF,WAAA,QAAgDoF,EAAA,OAAYW,OAAQC,UAAA,mBAAAf,EAAAjF,WAAA,qBAA6EoF,EAAA,KAAAH,EAAAgB,GAAAhB,EAAAiB,GAAA,IAAAjB,EAAAjF,WAAAiF,EAAAnD,GAAA,UAAAmD,EAAAnD,GAAA,sBAAAmD,EAAAgB,GAAA,KAAAb,EAAA,OAAqHE,YAAA,eAAyBF,EAAA,OAAYE,YAAA,QAAkBF,EAAA,SAAce,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAArB,EAAA,QAAAsB,WAAA,YAAwEhB,OAASiB,UAAA,KAAAC,YAAAxB,EAAAnD,GAAA,6CAAkF4E,UAAWJ,MAAArB,EAAA,SAAsBW,IAAKe,MAAA,SAAAb,GAAyBA,EAAAc,OAAAC,YAAsC5B,EAAA9D,QAAA2E,EAAAc,OAAAN,WAAkCrB,EAAAgB,GAAA,KAAAb,EAAA,OAAwBE,YAAA,OAAAwB,aAAgCC,mBAAA,oDAAsEnB,IAAKC,MAAAZ,EAAAzE,oBAA0ByE,EAAAgB,GAAA,KAAAb,EAAA,UAA+BG,OAAOyB,SAAA/B,EAAAnD,GAAA,YAAAmD,EAAAnD,GAAA,mBAAAmD,EAAAnD,GAAA,kBAAAmD,EAAAnD,GAAA,iBAAAmD,EAAAnD,GAAA,oBAAuI8D,IAAKqB,OAAAhC,EAAAjD,gBAA2BiD,EAAAgB,GAAA,KAAAb,EAAA,aAA8B8B,IAAA,YAAA5B,YAAA,aAAAC,OAAgD7E,KAAAuE,EAAAlE,SAAAiG,QAAA/B,EAAAtE,kBAAmDiF,IAAKuB,eAAAlC,EAAAzE,aAAA4G,aAAAnC,EAAA1B,oBAAmE0B,EAAAoC,QAAAC,KAAAC,UAAAtC,EAAAlE,WAAAqE,EAAA,WAA4DG,OAAOE,MAAAR,EAAAnD,GAAA,uCAAoDsD,EAAA,MAAAH,EAAAuC,GAAAvC,EAAA,kBAAAhB,EAAAwD,GAAsD,OAAArC,EAAA,OAAiBsC,IAAAD,EAAAnC,YAAA,cAAAM,IAAwCC,MAAA,SAAAC,GAAyBb,EAAAvB,aAAAO,EAAAO,QAA4B,IAAAiD,KAAA,GAAAxC,EAAA5C,OAAA4B,EAAA0D,WAAA,WAAA1C,EAAA5C,OAAA4C,EAAAlE,SAAA0G,EAAA,GAAAE,WAAA,SAAAvC,EAAA,OAA+IE,YAAA,WAAqBF,EAAA,KAAAH,EAAAgB,GAAA,iBAAAhB,EAAAiB,GAAAjB,EAAAnD,GAAA,2CAAAmD,EAAAiB,GAAAjB,EAAAnD,GAAAmD,EAAA5C,OAAA4B,EAAA0D,YAAA,OAAA1C,EAAA5C,OAAA4B,EAAA0D,WAAA,UAAA1C,EAAA5C,OAAA,IAAAC,KAAA,6EAAA2C,EAAA2C,KAAA3C,EAAAgB,GAAA,KAAAb,EAAA,OAA+TE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,OAAAS,OAA2BgB,mBAAA,iEAAkF9B,EAAAgB,GAAA,KAAAb,EAAA,OAA0BE,YAAA,WAAsBL,EAAAuC,GAAAvD,EAAA,kBAAA4D,EAAAC,GAAuD,OAAA1C,EAAA,OAAiBsC,IAAAI,EAAAxC,YAAA,UAAmCF,EAAA,KAAUE,YAAA,UAAoBL,EAAAgB,GAAAhB,EAAAiB,GAAA2B,EAAAE,mBAAA,MAAA9C,EAAAiB,GAAA2B,EAAAG,oBAAA/C,EAAAgB,GAAA,KAAAb,EAAA,KAAAH,EAAAgB,GAAAhB,EAAAiB,GAAAjB,EAAA5C,OAAAwF,EAAAI,WAAA,wBAAAhD,EAAAgB,GAAA,KAAAb,EAAA,OAAyME,YAAA,QAAkBF,EAAA,OAAYE,YAAA,OAAAS,OAA2BgB,mBAAA,QAAAc,EAAA,uBAAoE5C,EAAAgB,GAAA,KAAAb,EAAA,KAAAH,EAAAgB,GAAAhB,EAAAiB,GAAA2B,EAAAK,YAAAjD,EAAAgB,GAAA,KAAA4B,EAAA,SAAAzC,EAAA,KAAAH,EAAAgB,GAAA,MAAAhB,EAAAiB,GAAA2B,EAAAM,aAAAlD,EAAA2C,OAAA3C,EAAAgB,GAAA,KAAAb,EAAA,KAA6K0B,aAAasB,gBAAA,SAAuBnD,EAAAgB,GAAAhB,EAAAiB,GAAAjB,EAAAnD,GAAA,+BAAAmD,EAAAiB,GAAAjC,EAAAoE,uBAAsFpD,EAAAgB,GAAA,KAAAb,EAAA,OAAyBE,YAAA,UAAoBF,EAAA,KAAUe,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA,IAAArC,EAAAqE,aAAA/B,WAAA,4BAAkGjB,YAAA,UAAsBL,EAAAgB,GAAA,IAAAhB,EAAAiB,GAAAjC,EAAAsE,wBAAAtD,EAAAgB,GAAA,KAAAb,EAAA,KAAqEE,YAAA,WAAqBL,EAAAgB,GAAAhB,EAAAiB,GAAAjB,EAAAuD,GAAA,qBAAAvD,CAAAhB,EAAAqE,4BAA4ErD,EAAAgB,GAAA,KAAAhB,EAAAtE,iBAAAG,WAAoFmE,EAAA2C,KAApFxC,EAAA,KAAyDE,YAAA,iBAA2BL,EAAAgB,GAAAhB,EAAAiB,GAAAjB,EAAAnD,GAAA,qDAE7tH2G,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA5J,EACA+F,GATA,EAVA,SAAA8D,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/22.d7690ca9ddc37f5d8683.js","sourcesContent":["<template>\n  <div class=\"hs-container\">\n    <c-header isBackNav :title=\"$t('base.FlightsRefunds')\" fixedBackPath=\"/personal/center\">\n      <div slot=\"right\" class=\"c-header-right\">\n        <div class=\"travelTypeSwitch\" @click=\"travelType = travelType === 0 ? 1 : 0\">\n          <div :style=\"{transform: `translateX(${travelType === 0 ? '0px' : '20px'})`}\"><p>{{travelType === 0 ? $t('base.B') : $t('base.P')}}</p></div>\n        </div>\n      </div>\n    </c-header>\n    <div class=\"search-bar\">\n      <div class=\"bar\">\n        <input maxlength='50' v-model=\"PsgName\" :placeholder=\"$t('base.PleaseEnterThePassengerNameToSearch')\"/>\n        <div class=\"logo\" style=\"background-image: url('static/image/plane-ticket/book/search.png')\" @click=\"_getDatalist\"></div>\n      </div>\n    </div>\n    <hs-tab :options=\"[$t('base.All'), $t('base.Processing'), $t('base.Refunding'), $t('base.Finished'), $t('base.Cancelled')]\" @select=\"_tabDelegate\"></hs-tab>\n    <hs-scroll\n      class=\"table-view\"\n      ref=\"tableView\"\n      :data=\"datalist\"\n      :options=\"tableViewOptions\"\n      @pulling-down=\"_getDatalist\"\n      @pulling-up=\"_getDatalistMore\">\n      <hs-null v-if=\"noValue(JSON.stringify(datalist))\" :title=\"$t('base.AllOrdersForRecentSixMonths')\"></hs-null>\n      <ul v-else>\n        <div class=\"custom-cell\" v-for=\"(item, index) in datalist\" :key=\"index\" @click=\"_gotoDetails(item.ID)\">\n          <div class=\"header\" v-if=\"index === 0 || (index > 0 && (beTime(item.RefundDate, 'MM-dd') !== beTime(datalist[index - 1].RefundDate, 'MM-dd')))\">\n            <p>\n              {{$t('base.RefundOrderDate')}}:\n              {{$t(beTime(item.RefundDate), 'date', beTime(item.RefundDate, 'yyyy') === beTime(new Date(), 'yyyy') ? ['MM-dd', 'MM dd'] : ['yyyy-MM-dd', 'MM dd, yyyy'])}}\n            </p>\n          </div>\n          <div class=\"content\">\n            <div class=\"information\">\n              <div class=\"left\">\n                <div class=\"logo\" :style=\"{'background-image': `url('static/image/personal-center/cancelPlaneTicket.png')`}\"></div>\n              </div>\n              <div class=\"details\">\n                <div class=\"blank\" v-for=\"(itemChild, indexChild) in item.Segments\" :key=\"indexChild\">\n                  <p class=\"title\">{{itemChild.DepartureCityName}} - {{itemChild.ArrivalCityName}}</p>\n                  <p>{{beTime(itemChild.DepartDate, 'yyyy-MM-dd hh:mm')}}</p>\n                  <div class=\"row\">\n                    <div class=\"logo\" :style=\"{'background-image': `url('${itemChild.AirLineLogoUrl}')`}\"></div>\n                    <p>{{itemChild.AirLine}}</p>\n                    <p v-if=\"itemChild.FlightNo\">&nbsp;|&nbsp;{{itemChild.FlightNo}}</p>\n                  </div>\n                  <p style=\"margin-bottom: 0px\">{{$t('base.FlightsPassenger')}}:&nbsp;{{item.PassengerName}}</p>\n                </div>\n              </div>\n              <div class=\"right\">\n                <p class=\"price\" v-show=\"item.RefundStatus === 4\">￥{{item.RefundToGuestAmount}}</p>\n                <p class=\"status\">{{item.RefundStatus | filterRefundStatus}}</p>\n              </div>\n            </div>\n            <!-- <div class=\"btns\">\n              <p v-if=\"Number(item.RefundStatus) === 1 || Number(item.RefundStatus) === 2\" @click.stop=\"_cancel(item)\">{{$t('base.Cancel')}}</p>\n            </div> -->\n          </div>\n        </div>\n        <p class=\"allLoadedTxt\" v-if=\"!tableViewOptions.pullUpLoad\">{{$t('base.AllOrdersForRecentSixMonths')}}</p>\n      </ul>\n    </hs-scroll>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\n// 退票订单列表\nimport Vue from 'vue'\nimport CHeader from 'components/c-header/c-header'\nimport HsTab from 'base/hs-tab/hs-tab'\nimport HsScroll from 'base/hs-scroll/hs-scroll'\nimport HsSection from 'base/hs-tableview/hs-section/hs-section'\nimport HsCell1 from 'base/hs-tableview/hs-cell-1/hs-cell-1'\nimport HsNull from 'base/hs-null/hs-null'\nimport eventBus from 'common/js/eventBus.js'\nimport {kpiFlightGetRefundOrderList, kpiFlightCancelRefundOrder} from 'api'\nexport default {\n  components: {\n    CHeader,\n    HsTab,\n    HsScroll,\n    HsSection,\n    HsCell1,\n    HsNull\n  },\n  activated() {\n    this.travelType = Number(this.$route.params.TravelType) === 1 ? 1 : 0\n    eventBus.$off('refresh')\n    eventBus.$on('refresh', function () {\n      this._getDatalist()\n    }.bind(this))\n  },\n  data() {\n    return {\n      tableViewOptions: {\n        pullDownRefresh: {\n          threshold: 50\n        },\n        pullUpLoad: false\n      },\n      datalist: [],\n      dataStatus: 0,\n      currentPageIndex: 1,\n      currentPageSize: 10,\n      travelType: 0,\n      PsgName: ''\n    }\n  },\n  watch: {\n    travelType() {\n      this._getDatalist()\n    },\n    PsgName(val) {\n      this.timer && clearTimeout(this.timer) // eslint-disable-line\n      this.timer = setTimeout(() => {\n        this._getDatalist()\n      }, 1000)\n    }\n  },\n  filters: {\n    filterRefundStatus(val) {\n      switch (val) {\n        case 1:\n          return Vue.prototype.$t('base.SubmittedRefund')\n        case 2:\n          return Vue.prototype.$t('base.Apply')\n        case 3:\n          return Vue.prototype.$t('base.Refunding')\n        case 4:\n          return Vue.prototype.$t('base.RefundSucceed')\n        case 5:\n          return Vue.prototype.$t('base.UserCanceled')\n        case 6:\n          return Vue.prototype.$t('base.NoticeCanceled')\n        default:\n          return Vue.prototype.$t('base.Unknown')\n      }\n    }\n  },\n  methods: {\n    _tabDelegate(status) {\n      if (this.dataStatus !== status) {\n        this.dataStatus = status\n        this._getDatalist()\n      }\n    },\n    /** 获取订单列表 */\n    _getDatalist() {\n      this.datalist = []\n      this.currentPageIndex = 1\n      this.tableViewOptions.pullUpLoad = false\n      let params = {\n        StartDate: this.beTimeNumber(this.beTime(new Date().setMonth(new Date().getMonth() - 6))),\n        EndDate: this.beTimeNumber(this.beTime(new Date())),\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        Status: this.dataStatus,\n        TravelType: this.travelType,\n        PsgName: this.PsgName\n      }\n      kpiFlightGetRefundOrderList(params).then((res) => {\n        console.log('退票机票订单列表: ', res)\n        this.datalist = res.ResultData.Orders\n        if (res.ResultData.Orders.length >= this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    /** 获取更多订单列表 */\n    _getDatalistMore() {\n      this.currentPageIndex++\n      let params = {\n        StartDate: this.beTimeNumber(this.beTime(new Date().setMonth(new Date().getMonth() - 6))),\n        EndDate: this.beTimeNumber(this.beTime(new Date())),\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        Status: this.dataStatus,\n        TravelType: this.travelType,\n        PsgName: this.PsgName\n      }\n      kpiFlightGetRefundOrderList(params).then((res) => {\n        console.log('退票机票订单列表: ', res)\n        this.datalist = this.datalist.concat(res.ResultData.Orders)\n        if (res.ResultData.Orders.length < this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = false\n        } else {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    _gotoDetails(Id) {\n      this.$router.push({path: '/personal/refundDetails', query: {Id: Id}})\n    },\n    /** 取消 */\n    _cancel(item) {\n      this.$alert({\n        content: this.$t('TM.AreYouSureToCancelTheOrder'),\n        cancelTxt: this.$t('base.Cancel'),\n        confirmFn: () => {\n          let params = {\n            id: item.ID\n          }\n          kpiFlightCancelRefundOrder(params).then((res) => {\n            if (res.ResultData === true) {\n              this.$toast(this.$t('TM.OrderCancelled'))\n              this._getDatalist()\n            } else {\n              this.$toast(this.$t('TM.OrderCancelFailed'))\n            }\n          })\n        }\n      })\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    // console.log('订单列表from: ', from)\n    next(vm => {\n      if (from.path === '/' || from.path === '/personal/center') {\n        vm.travelType = 0\n        vm.dataStatus = 0\n        vm._getDatalist()\n      } else if (from.path === '/planeTicket/orderConfirm') {\n        vm.travelType = Number(vm.$route.params.TravelType) === 1 ? 1 : 0\n        vm._getDatalist()\n      } else if (!vm.datalist || vm.datalist.length === 0) {\n        vm._getDatalist()\n      }\n    })\n  }\n}\n</script>\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n@import '~common/stylus/base'\n@import '~common/stylus/variable'\n@import '~common/stylus/mixin'\n.hs-container\n  width 100%\n  height 100%\n  .c-header-right\n    @extend .flex-row\n    @extend .flex-end\n    width 100%\n    >.travelTypeSwitch\n      @extend .flex-row\n      @extend .flex-start\n      width 50px\n      height 30px\n      border 1px solid $color_theme\n      background-color $color_theme\n      border-radius 15px\n      // position absolute\n      // top 7px\n      // right 10px\n      >div\n        @extend .flex-center\n        width 28px\n        height 28px\n        border-radius 15px\n        background-color $color_white\n        transition all 400ms\n        >p\n          font-size 0.8rem\n          color $color_theme\n  >.search-bar\n    @extend .flex-center\n    width 100%\n    padding 5px 15px\n    background-color $color_white\n    >.bar\n      @extend .flex-row\n      @extend .flex-between\n      width 100%\n      border-radius 4px\n      border 1px solid $color_gray_layer\n      padding 10px\n      background-color $color_white\n      font-size 0.9rem\n      >input\n        width calc(100% - 30px)\n        height 100%\n      >.logo\n        width 20px\n        height 20px\n        background-size 100% 100%\n  >.table-view\n    width 100%\n    height calc(100% - 45px - 52px - 40px)\n    overflow hidden\n    .custom-cell\n      width 100%\n      padding 15px 10px\n      padding-bottom 0px\n      >.header\n        @extend .flex-row\n        @extend .flex-start\n        width 100%\n        margin-bottom 10px\n        >p\n          background-color $color_red_background_1\n          color $color_white\n          font-size 0.8rem\n          line-height 20px\n          border-radius 10px\n          padding 0 10px\n          margin-right 10px\n      >.content\n        width 100%\n        background-color $color_white\n        border-radius 3px\n        padding 10px\n        box-shadow 0 0 10px $color_gray_layer\n        >.information\n          @extend .flex-row\n          @extend .flex-start\n          @extend .flex-top\n          width 100%\n          >.left\n            width 30px\n            padding 10px 0\n            >.logo\n              width 20px\n              height 20px\n              background-size 100% 100%\n          >.details\n            width calc(100% - 100px)\n            >.blank\n              width 100%\n              padding 10px 0\n              >.title\n                @extend .flex-row\n                @extend .flex-start\n                width 100%\n                line-height 20px\n                font-size 1.1rem\n                color $color_black_text_0\n                font-weight bold\n                margin-bottom 12px\n              >p\n                width 100%\n                font-size 0.9rem\n                color $color_black_text_1\n                margin-bottom 10px\n                line-height 1.2em\n              >.row\n                @extend .flex-row\n                @extend .flex-start\n                width 100%\n                margin-bottom 10px\n                >.logo\n                  width 15px\n                  height 15px\n                  background-size 100% 100%\n                  margin-right 5px\n                >p\n                  font-size 0.9rem\n                  color $color_black_text_1\n          >.right\n            @extend .flex-column\n            @extend .flex-bottom\n            width 70px\n            padding 10px 0\n            >.price\n              @extend .flex-row\n              @extend .flex-end\n              line-height 20px\n              font-size 1rem\n              font-weight bold\n              color $color_theme\n              margin-bottom 10px\n            >.status\n              font-size 0.7rem\n              color $color_orange_text\n        >.btns\n          @extend .flex-row\n          @extend .flex-end\n          width 100%\n          >p\n            @extend .flex-center\n            color $color_black_text_1\n            height 30px\n            border-radius 15px\n            padding 0 15px\n            background-color $color_gray_background_0\n            font-size 0.9rem\n            margin-left 10px\n    .allLoadedTxt\n      @extend .flex-center\n      width 100%\n      height 40px\n      font-size 0.8rem\n      color $color_black_text_1\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/personal/refund/refund-list/refund-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hs-container\"},[_c('c-header',{attrs:{\"isBackNav\":\"\",\"title\":_vm.$t('base.FlightsRefunds'),\"fixedBackPath\":\"/personal/center\"}},[_c('div',{staticClass:\"c-header-right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"travelTypeSwitch\",on:{\"click\":function($event){_vm.travelType = _vm.travelType === 0 ? 1 : 0}}},[_c('div',{style:({transform: (\"translateX(\" + (_vm.travelType === 0 ? '0px' : '20px') + \")\")})},[_c('p',[_vm._v(_vm._s(_vm.travelType === 0 ? _vm.$t('base.B') : _vm.$t('base.P')))])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"search-bar\"},[_c('div',{staticClass:\"bar\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.PsgName),expression:\"PsgName\"}],attrs:{\"maxlength\":\"50\",\"placeholder\":_vm.$t('base.PleaseEnterThePassengerNameToSearch')},domProps:{\"value\":(_vm.PsgName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.PsgName=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"logo\",staticStyle:{\"background-image\":\"url('static/image/plane-ticket/book/search.png')\"},on:{\"click\":_vm._getDatalist}})])]),_vm._v(\" \"),_c('hs-tab',{attrs:{\"options\":[_vm.$t('base.All'), _vm.$t('base.Processing'), _vm.$t('base.Refunding'), _vm.$t('base.Finished'), _vm.$t('base.Cancelled')]},on:{\"select\":_vm._tabDelegate}}),_vm._v(\" \"),_c('hs-scroll',{ref:\"tableView\",staticClass:\"table-view\",attrs:{\"data\":_vm.datalist,\"options\":_vm.tableViewOptions},on:{\"pulling-down\":_vm._getDatalist,\"pulling-up\":_vm._getDatalistMore}},[(_vm.noValue(JSON.stringify(_vm.datalist)))?_c('hs-null',{attrs:{\"title\":_vm.$t('base.AllOrdersForRecentSixMonths')}}):_c('ul',[_vm._l((_vm.datalist),function(item,index){return _c('div',{key:index,staticClass:\"custom-cell\",on:{\"click\":function($event){_vm._gotoDetails(item.ID)}}},[(index === 0 || (index > 0 && (_vm.beTime(item.RefundDate, 'MM-dd') !== _vm.beTime(_vm.datalist[index - 1].RefundDate, 'MM-dd'))))?_c('div',{staticClass:\"header\"},[_c('p',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('base.RefundOrderDate'))+\":\\n            \"+_vm._s(_vm.$t(_vm.beTime(item.RefundDate), 'date', _vm.beTime(item.RefundDate, 'yyyy') === _vm.beTime(new Date(), 'yyyy') ? ['MM-dd', 'MM dd'] : ['yyyy-MM-dd', 'MM dd, yyyy']))+\"\\n          \")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"information\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"logo\",style:({'background-image': \"url('static/image/personal-center/cancelPlaneTicket.png')\"})})]),_vm._v(\" \"),_c('div',{staticClass:\"details\"},_vm._l((item.Segments),function(itemChild,indexChild){return _c('div',{key:indexChild,staticClass:\"blank\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(itemChild.DepartureCityName)+\" - \"+_vm._s(itemChild.ArrivalCityName))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.beTime(itemChild.DepartDate, 'yyyy-MM-dd hh:mm')))]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"logo\",style:({'background-image': (\"url('\" + (itemChild.AirLineLogoUrl) + \"')\")})}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(itemChild.AirLine))]),_vm._v(\" \"),(itemChild.FlightNo)?_c('p',[_vm._v(\" | \"+_vm._s(itemChild.FlightNo))]):_vm._e()]),_vm._v(\" \"),_c('p',{staticStyle:{\"margin-bottom\":\"0px\"}},[_vm._v(_vm._s(_vm.$t('base.FlightsPassenger'))+\": \"+_vm._s(item.PassengerName))])])})),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.RefundStatus === 4),expression:\"item.RefundStatus === 4\"}],staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(item.RefundToGuestAmount))]),_vm._v(\" \"),_c('p',{staticClass:\"status\"},[_vm._v(_vm._s(_vm._f(\"filterRefundStatus\")(item.RefundStatus)))])])])])])}),_vm._v(\" \"),(!_vm.tableViewOptions.pullUpLoad)?_c('p',{staticClass:\"allLoadedTxt\"},[_vm._v(_vm._s(_vm.$t('base.AllOrdersForRecentSixMonths')))]):_vm._e()],2)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e9dc24e8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/personal/refund/refund-list/refund-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e9dc24e8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./refund-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./refund-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./refund-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e9dc24e8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./refund-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e9dc24e8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/personal/refund/refund-list/refund-list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}