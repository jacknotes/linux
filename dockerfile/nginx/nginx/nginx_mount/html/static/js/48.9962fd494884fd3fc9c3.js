webpackJsonp([48],{"+30q":function(e,t){},HyJ4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),r=a("mtWM"),l=a.n(r),o=a("v2mk"),n=a("4aFc"),c=a("bJna"),d=a("yyVE"),u=a("CCVD"),h=a("C0NF"),v=a("9Vmw"),_=a("ANyL"),C=a("NYxO"),g=a("gyMJ"),m={created:function(){this.noValue(this.trainOrder.DepartStationCode)?this.$router.replace("/home"):this._getDetails()},computed:s()({},Object(C.c)(["trainOrder"]),{originalDetails:function(){return JSON.parse(this.$route.query.originalDetails)}}),data:function(){return{details:{},showRule:!1,ruleDetails:""}},methods:s()({},Object(C.d)(["SET_TRAIN_ORDER"]),{_getDetails:function(){var e=this,t={OrderID:this.trainOrder.OriginalOrderID,TrainCode:this.originalDetails.TrainCode,DepartStationCode:this.originalDetails.DepartStationCode,NewArrivalStationCode:this.trainOrder.ArrivalStationCode,SelectedTrainInfo:{TrainCode:this.trainOrder.GoSelectedRoute.TrainCode,SeatTypeCode:this.trainOrder.GoSelectedRoute.TypeCode,DepartDate:this.trainOrder.GoSelectedRoute.DepartureDateTime,ChooseSeats:this.trainOrder.GoSelectedRoute.ChooseSeats}};Object(g._31)(t).then(function(t){e.details=t.ResultData})},_getChangeDetails:function(){var e=this;l.a.get("/static/html/trainChange.html").then(function(t){e.ruleDetails=t.data,e.showRule=!0})},_select:function(e){this.details.Route.Tickets[e].select=!this.details.Route.Tickets[e].select,this.$forceUpdate()},_gotoChange:function(){var e=this,t=this.details.Route.Tickets.filter(function(e){return e.select}).map(function(e){return e.TicketID});if(0!==t.length){var a={TicketIds:t,DepartStationCode:this.originalDetails.DepartStationCode,ArrivalStationCode:this.trainOrder.ArrivalStationCode,SelectedTrainInfo:{TrainCode:this.trainOrder.GoSelectedRoute.TrainCode,SeatTypeCode:this.trainOrder.GoSelectedRoute.TypeCode,DepartDate:this.trainOrder.GoSelectedRoute.DepartureDateTime,ChooseSeats:this.trainOrder.GoSelectedRoute.ChooseSeats},OperateType:this.originalDetails.ArrivalStationCode===this.trainOrder.ArrivalStationCode?0:1};Object(g._41)(a).then(function(t){!0===t.ResultData.IsSuccess?(e.$toast(e.$t("TM.ChangeSuccessfully")),setTimeout(function(){o.a.$emit("refresh")},0),e.$router.replace({path:"/train/orderDetail",query:{Id:e.trainOrder.OriginalOrderID,isOwner:!0}})):e.$toast(e.$t("TM.ChangeFailed"))})}else this.$toast(this.$t("TM.PleaseSelectThePassengersToBeChanged"))}}),components:{HsCell1:n.a,HsDialog:c.a,HsGradientButton:d.a,HsHeader:u.a,HsScroll:h.a,HsSection:v.a,TrainSegment:_.a}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hs-container"},[a("hs-header",{attrs:{title:e.$t("base.Change"),isBackNav:""}}),e._v(" "),a("hs-scroll",{staticClass:"tableView",attrs:{data:[e.details]}},[a("ul",[a("train-segment",{attrs:{detail:e.originalDetails,title:e.$t("base.OriginalSchedule")}},[a("hs-cell-1",{attrs:{showLogo:!1},nativeOn:{click:function(t){return e._getChangeDetails(t)}}},[a("div",{staticClass:"cell-segment-one"},[a("p",[e._v(e._s(e.originalDetails.SeatTypeName))]),e._v(" "),a("p",[e._v(e._s(e.$t("base.ChangeInstructions")))])])])],1),e._v(" "),e.trainOrder&&e.trainOrder.GoSelectedRoute?a("hs-section",{attrs:{title:e.$t("base.Rescheduling")}},[a("hs-cell-1",{attrs:{showLogo:!1}},[a("div",{staticClass:"cell-segment"},[a("div",{staticClass:"cell-segment-left"},[a("p",[e._v(e._s(e.$t(e.beTime(e.trainOrder.GoSelectedRoute.DepartureDateTime),"date",["MM月dd日","MM dd"]))+" "+e._s(e.getWeeks(e.beTime(e.trainOrder.GoSelectedRoute.DepartureDateTime))))]),e._v(" "),a("p",[e._v(e._s(e.beTime(e.trainOrder.GoSelectedRoute.DepartureDateTime,"hh:mm")))]),e._v(" "),a("p",[e._v(e._s(e.trainOrder.GoSelectedRoute.DepartStationName))])]),e._v(" "),a("div",{staticClass:"cell-segment-middle"},[a("p",[e._v(e._s(e.trainOrder.GoSelectedRoute.TrainCode))]),e._v(" "),a("div",{staticClass:"cell-segment-time"},[a("div",{staticClass:"layer"})]),e._v(" "),a("p",[e._v(e._s(e.trainOrder.GoSelectedRoute.RunTime))])]),e._v(" "),a("div",{staticClass:"cell-segment-right"},[a("p",[e._v(e._s(e.$t(e.beTime(e.trainOrder.GoSelectedRoute.ArrivalDateTime),"date",["MM月dd日","MM dd"]))+" "+e._s(e.getWeeks(e.beTime(e.trainOrder.GoSelectedRoute.ArrivalDateTime))))]),e._v(" "),a("p",[e._v(e._s(e.beTime(e.trainOrder.GoSelectedRoute.ArrivalDateTime,"hh:mm"))),e.trainOrder.GoSelectedRoute.ArrivalDays>0?a("span",{staticClass:"ArrivalDays"},[e._v("+"+e._s(e.trainOrder.GoSelectedRoute.ArrivalDays))]):e._e()]),e._v(" "),a("p",[e._v(e._s(e.trainOrder.GoSelectedRoute.ArrivalStationName))])])])]),e._v(" "),a("hs-cell-1",{attrs:{showLogo:!1},nativeOn:{click:function(t){return e._getChangeDetails(t)}}},[a("div",{staticClass:"cell-segment-one",attrs:{type:e.language}},[a("p",[e._v(e._s(e.trainOrder.GoSelectedRoute.TypeName))]),e._v(" "),a("p",[e._v(e._s(e.$t("base.ChangeInstructions")))])])])],1):e._e(),e._v(" "),e.details&&e.details.Route?a("hs-section",{attrs:{title:"#"}},[a("div",{staticClass:"tips",attrs:{slot:"title"},slot:"title"},[e._v("*具体价格以12306审核为准")]),e._v(" "),e._l(e.details.Route.Tickets,function(t,i){return a("hs-cell-1",{key:i,attrs:{showLogo:!1},nativeOn:{click:function(t){e._select(i)}}},[a("div",{staticClass:"custom-cell"},[a("div",{staticClass:"left"},[a("p",{staticClass:"name"},[e._v(e._s(t.PsgName))]),e._v(" "),a("p",[e._v(e._s(t.Credential.CredentialName)+" "+e._s(t.Credential.CredentialNo))])]),e._v(" "),e.details.Route.Tickets[i]?a("div",{staticClass:"right"},[a("div",{staticClass:"items"},[a("div",{staticClass:"item"},[a("p",[e._v("差价")]),e._v(" "),a("p",{staticClass:"price"},[e._v("¥"+e._s(e.details.DiffPrice))])]),e._v(" "),a("div",{staticClass:"item"},[a("p",[e._v("改签费")]),e._v(" "),a("p",{staticClass:"price"},[e._v("¥"+e._s(e.details.ChangePrice))])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.details.Route.Tickets[i].select,expression:"details.Route.Tickets[index].select"}],staticClass:"checkbox",staticStyle:{"background-image":"url('static/image/base/check-box/check-box.png')"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.details.Route.Tickets[i].select,expression:"!details.Route.Tickets[index].select"}],staticClass:"checkbox",staticStyle:{"background-image":"url('static/image/base/check-box/check-box-default.png')"}})]):e._e()])])})],2):e._e()],1)]),e._v(" "),a("div",{staticClass:"footer"},[a("hs-gradient-button",{attrs:{type:"auto",width:"60%",height:"40px",title:e.$t("base.Change")},on:{click:e._gotoChange}})],1),e._v(" "),a("hs-dialog",{model:{value:e.showRule,callback:function(t){e.showRule=t},expression:"showRule"}},[a("hs-scroll",{staticClass:"ruleDialog",attrs:{data:[e.ruleDetails]}},[a("ul",[a("div",{domProps:{innerHTML:e._s(e.ruleDetails)}})])])],1)],1)},staticRenderFns:[]};var D=a("VU/8")(m,p,!1,function(e){a("+30q")},"data-v-51f67bef",null);t.default=D.exports}});
//# sourceMappingURL=48.9962fd494884fd3fc9c3.js.map