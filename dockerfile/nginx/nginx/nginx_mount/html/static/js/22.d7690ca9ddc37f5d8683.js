webpackJsonp([22],{WuRT:function(t,e){},fJbL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("CCVD"),n=a("QRZS"),r=a("C0NF"),l=a("9Vmw"),o=a("4aFc"),c=a("EqUB"),u=a("v2mk"),d=a("gyMJ"),p={components:{CHeader:i.a,HsTab:n.a,HsScroll:r.a,HsSection:l.a,HsCell1:o.a,HsNull:c.a},activated:function(){this.travelType=1===Number(this.$route.params.TravelType)?1:0,u.a.$off("refresh"),u.a.$on("refresh",function(){this._getDatalist()}.bind(this))},data:function(){return{tableViewOptions:{pullDownRefresh:{threshold:50},pullUpLoad:!1},datalist:[],dataStatus:0,currentPageIndex:1,currentPageSize:10,travelType:0,PsgName:""}},watch:{travelType:function(){this._getDatalist()},PsgName:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e._getDatalist()},1e3)}},filters:{filterRefundStatus:function(t){switch(t){case 1:return s.a.prototype.$t("base.SubmittedRefund");case 2:return s.a.prototype.$t("base.Apply");case 3:return s.a.prototype.$t("base.Refunding");case 4:return s.a.prototype.$t("base.RefundSucceed");case 5:return s.a.prototype.$t("base.UserCanceled");case 6:return s.a.prototype.$t("base.NoticeCanceled");default:return s.a.prototype.$t("base.Unknown")}}},methods:{_tabDelegate:function(t){this.dataStatus!==t&&(this.dataStatus=t,this._getDatalist())},_getDatalist:function(){var t=this;this.datalist=[],this.currentPageIndex=1,this.tableViewOptions.pullUpLoad=!1;var e={StartDate:this.beTimeNumber(this.beTime((new Date).setMonth((new Date).getMonth()-6))),EndDate:this.beTimeNumber(this.beTime(new Date)),PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,Status:this.dataStatus,TravelType:this.travelType,PsgName:this.PsgName};Object(d.x)(e).then(function(e){t.datalist=e.ResultData.Orders,e.ResultData.Orders.length>=t.currentPageSize&&(t.tableViewOptions.pullUpLoad={threshold:50}),t.$refs.tableView&&t.$refs.tableView.forceUpdate()})},_getDatalistMore:function(){var t=this;this.currentPageIndex++;var e={StartDate:this.beTimeNumber(this.beTime((new Date).setMonth((new Date).getMonth()-6))),EndDate:this.beTimeNumber(this.beTime(new Date)),PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,Status:this.dataStatus,TravelType:this.travelType,PsgName:this.PsgName};Object(d.x)(e).then(function(e){t.datalist=t.datalist.concat(e.ResultData.Orders),e.ResultData.Orders.length<t.currentPageSize?t.tableViewOptions.pullUpLoad=!1:t.tableViewOptions.pullUpLoad={threshold:50},t.$refs.tableView&&t.$refs.tableView.forceUpdate()})},_gotoDetails:function(t){this.$router.push({path:"/personal/refundDetails",query:{Id:t}})},_cancel:function(t){var e=this;this.$alert({content:this.$t("TM.AreYouSureToCancelTheOrder"),cancelTxt:this.$t("base.Cancel"),confirmFn:function(){var a={id:t.ID};Object(d.d)(a).then(function(t){!0===t.ResultData?(e.$toast(e.$t("TM.OrderCancelled")),e._getDatalist()):e.$toast(e.$t("TM.OrderCancelFailed"))})}})}},beforeRouteEnter:function(t,e,a){a(function(t){"/"===e.path||"/personal/center"===e.path?(t.travelType=0,t.dataStatus=0,t._getDatalist()):"/planeTicket/orderConfirm"===e.path?(t.travelType=1===Number(t.$route.params.TravelType)?1:0,t._getDatalist()):t.datalist&&0!==t.datalist.length||t._getDatalist()})}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hs-container"},[a("c-header",{attrs:{isBackNav:"",title:t.$t("base.FlightsRefunds"),fixedBackPath:"/personal/center"}},[a("div",{staticClass:"c-header-right",attrs:{slot:"right"},slot:"right"},[a("div",{staticClass:"travelTypeSwitch",on:{click:function(e){t.travelType=0===t.travelType?1:0}}},[a("div",{style:{transform:"translateX("+(0===t.travelType?"0px":"20px")+")"}},[a("p",[t._v(t._s(0===t.travelType?t.$t("base.B"):t.$t("base.P")))])])])])]),t._v(" "),a("div",{staticClass:"search-bar"},[a("div",{staticClass:"bar"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.PsgName,expression:"PsgName"}],attrs:{maxlength:"50",placeholder:t.$t("base.PleaseEnterThePassengerNameToSearch")},domProps:{value:t.PsgName},on:{input:function(e){e.target.composing||(t.PsgName=e.target.value)}}}),t._v(" "),a("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/search.png')"},on:{click:t._getDatalist}})])]),t._v(" "),a("hs-tab",{attrs:{options:[t.$t("base.All"),t.$t("base.Processing"),t.$t("base.Refunding"),t.$t("base.Finished"),t.$t("base.Cancelled")]},on:{select:t._tabDelegate}}),t._v(" "),a("hs-scroll",{ref:"tableView",staticClass:"table-view",attrs:{data:t.datalist,options:t.tableViewOptions},on:{"pulling-down":t._getDatalist,"pulling-up":t._getDatalistMore}},[t.noValue(JSON.stringify(t.datalist))?a("hs-null",{attrs:{title:t.$t("base.AllOrdersForRecentSixMonths")}}):a("ul",[t._l(t.datalist,function(e,s){return a("div",{key:s,staticClass:"custom-cell",on:{click:function(a){t._gotoDetails(e.ID)}}},[0===s||s>0&&t.beTime(e.RefundDate,"MM-dd")!==t.beTime(t.datalist[s-1].RefundDate,"MM-dd")?a("div",{staticClass:"header"},[a("p",[t._v("\n            "+t._s(t.$t("base.RefundOrderDate"))+":\n            "+t._s(t.$t(t.beTime(e.RefundDate),"date",t.beTime(e.RefundDate,"yyyy")===t.beTime(new Date,"yyyy")?["MM-dd","MM dd"]:["yyyy-MM-dd","MM dd, yyyy"]))+"\n          ")])]):t._e(),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"information"},[a("div",{staticClass:"left"},[a("div",{staticClass:"logo",style:{"background-image":"url('static/image/personal-center/cancelPlaneTicket.png')"}})]),t._v(" "),a("div",{staticClass:"details"},t._l(e.Segments,function(s,i){return a("div",{key:i,staticClass:"blank"},[a("p",{staticClass:"title"},[t._v(t._s(s.DepartureCityName)+" - "+t._s(s.ArrivalCityName))]),t._v(" "),a("p",[t._v(t._s(t.beTime(s.DepartDate,"yyyy-MM-dd hh:mm")))]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"logo",style:{"background-image":"url('"+s.AirLineLogoUrl+"')"}}),t._v(" "),a("p",[t._v(t._s(s.AirLine))]),t._v(" "),s.FlightNo?a("p",[t._v(" | "+t._s(s.FlightNo))]):t._e()]),t._v(" "),a("p",{staticStyle:{"margin-bottom":"0px"}},[t._v(t._s(t.$t("base.FlightsPassenger"))+": "+t._s(e.PassengerName))])])})),t._v(" "),a("div",{staticClass:"right"},[a("p",{directives:[{name:"show",rawName:"v-show",value:4===e.RefundStatus,expression:"item.RefundStatus === 4"}],staticClass:"price"},[t._v("￥"+t._s(e.RefundToGuestAmount))]),t._v(" "),a("p",{staticClass:"status"},[t._v(t._s(t._f("filterRefundStatus")(e.RefundStatus)))])])])])])}),t._v(" "),t.tableViewOptions.pullUpLoad?t._e():a("p",{staticClass:"allLoadedTxt"},[t._v(t._s(t.$t("base.AllOrdersForRecentSixMonths")))])],2)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,h,!1,function(t){a("WuRT")},"data-v-e9dc24e8",null);e.default=g.exports}});
//# sourceMappingURL=22.d7690ca9ddc37f5d8683.js.map