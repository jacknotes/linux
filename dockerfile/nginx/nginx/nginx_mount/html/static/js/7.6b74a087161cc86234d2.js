webpackJsonp([7],{"75G2":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("CCVD"),i=s("4aFc"),n=s("EqUB"),l={data:function(){return{show:!1}},methods:{open:function(){var e=this;this.show=!0,setTimeout(function(){e.$refs.Details.style.transform="scale(1, 1)",e.$refs.Details.style.opacity=1},100)},close:function(){var e=this;this.$refs.Details.style.transform="scale(0.1, 0.1)",this.$refs.Details.style.opacity=0,setTimeout(function(){e.show=!1},200)}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"opacity"}},[this.show?t("div",{staticClass:"hs-dialog-menu",on:{click:this.close}},[t("div",{ref:"Details",staticClass:"details",on:{click:function(e){e.stopPropagation()}}},[this._t("default")],2)]):this._e()])},staticRenderFns:[]};var o=s("VU/8")(l,r,!1,function(e){s("ewLv")},"data-v-6eb4cdaa",null).exports,c=s("C0NF"),d=s("9Vmw"),u=s("QRZS"),p=s("2lc2"),g=s("gyMJ"),h={data:function(){return{show:!1,tableViewOptions:{pullDownRefresh:{threshold:50}},datalist:[],currentPageIndex:1,currentPageSize:30,KeyWord:""}},watch:{show:function(e){e&&this._getDatalist()}},methods:{open:function(){this.show=!0},close:function(){this.show=!1},_getDatalist:function(){var e=this;this.currentPageIndex=1,this.tableViewOptions.pullUpLoad=!1;var t={KeyWord:this.KeyWord,PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,TravelType:0,ImportType:1};Object(g._50)(t).then(function(t){var s=t.ResultData;e.datalist=s,t.ResultData.length>=e.currentPageSize&&(e.tableViewOptions.pullUpLoad={threshold:50}),e.$refs.tableView&&e.$refs.tableView.forceUpdate()})},_getDatalistMore:function(){var e=this;this.currentPageIndex++;var t={KeyWord:this.KeyWord,PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,TravelType:0,ImportType:1};Object(g._50)(t).then(function(t){var s=t.ResultData;e.datalist=e.datalist.concat(s),t.ResultData.length<e.currentPageSize?e.tableViewOptions.pullUpLoad=!1:e.tableViewOptions.pullUpLoad={threshold:50},e.$refs.tableView&&e.$refs.tableView.forceUpdate()})},_import:function(e,t){var s=this,a={ID:e.ID,TravelType:0};Object(g.F)(a).then(function(e){s.$set(s.datalist[t],"Added",!0)})}},components:{CHeader:a.a,HsCell1:i.a,HsNull:n.a,HsScroll:c.a,HsSection:d.a,HsTab:u.a}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"slide"}},[e.show?s("div",{staticClass:"hs-container-child"},[s("c-header",{attrs:{title:"常旅客导入(因公)",leftIcon1:"return.png",leftFn1:e.close}}),e._v(" "),s("div",{staticClass:"search-bar"},[s("div",{staticClass:"bar"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.KeyWord,expression:"KeyWord",modifiers:{trim:!0}}],attrs:{maxlength:"50",placeholder:e.$t("base.PleaseEnterAKeywordToSearch")},domProps:{value:e.KeyWord},on:{input:function(t){t.target.composing||(e.KeyWord=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/search.png')"},on:{click:e._getDatalist}})])]),e._v(" "),s("hs-scroll",{ref:"tableView",staticClass:"table-view",attrs:{data:e.datalist,options:e.tableViewOptions},on:{"pulling-down":e._getDatalist,"pulling-up":e._getDatalistMore}},[s("ul",[s("div",{staticStyle:{width:"100%",height:"1px"}}),e._v(" "),e.datalist&&0!==e.datalist.length?e._e():s("hs-null"),e._v(" "),e._l(e.datalist,function(t,a){return s("div",{key:a,staticClass:"custom-cell-passenger"},[s("div",{staticClass:"details"},[s("div",{staticClass:"header"},[s("p",{staticClass:"name"},[e._v("\n                "+e._s(t.ChName)+"\n                "),t.LastName&&t.FirstName?[e._v(e._s(t.LastName)+" "+e._s(t.FirstName))]:e._e()],2),e._v(" "),1===t.UpType?s("div",{staticClass:"staff"},[e._v("员工")]):e._e(),e._v(" "),2===t.UpType?s("div",{staticClass:"no-staff"},[e._v("非员工")]):e._e()]),e._v(" "),t.Credentials.filter(function(e){return e.IsDefault})[0]&&t.Credentials.filter(function(e){return e.IsDefault})[0].CredentialNo?s("div",{staticClass:"item"},[s("p",[e._v("\n                "+e._s(t.Credentials.filter(function(e){return e.IsDefault})[0].CredentialName)+"\n              ")]),e._v(" "),s("p",[e._v("\n                "+e._s(t.Credentials.filter(function(e){return e.IsDefault})[0].CredentialNo)+"\n              ")])]):e._e(),e._v(" "),t.Mobile?s("div",{staticClass:"item"},[s("p",[e._v(e._s(e.$t("base.CellphoneNumber")))]),e._v(" "),s("p",[e._v(e._s(t.Mobile))])]):e._e()]),e._v(" "),t.Added?e._e():s("div",{staticClass:"footer"},[s("p",{on:{click:function(s){e._import(t,a)}}},[e._v(e._s(e.$t("base.Add")))])])])}),e._v(" "),s("div",{staticStyle:{width:"100%",height:"10px"}})],2)])],1):e._e()])},staticRenderFns:[]};var f=s("VU/8")(h,v,!1,function(e){s("c6Tt")},"data-v-f7cd1eca",null).exports,_={created:function(){this._getUserManageInfo(),this._getDatalist()},data:function(){return{tableViewOptions:{pullDownRefresh:{threshold:50}},tabOptions:[],details:{},datalist:[],currentPageIndex:1,currentPageSize:30,KeyWord:"",showDialog:!1,travelType:0,passengerDetails:{},TYPE_ADD_BUSINESS:0,TYPE_IMPOER_BUSINESS:1,TYPE_ADD_PERSONAL:2,userManageInfo:void 0}},watch:{travelType:function(){this._getDatalist()}},methods:{_getUserManageInfo:function(){var e=this;Object(g._58)({}).then(function(t){e.userManageInfo=t.ResultData,0===e.userManageInfo.TravelerManageRole?(e.tabOptions=[e.$t("base.Business"),e.$t("base.Personal")],e.travelType=0):1===e.userManageInfo.TravelerManageRole?(e.tabOptions=[e.$t("base.Business")],e.travelType=0):2===e.userManageInfo.TravelerManageRole&&(e.tabOptions=[e.$t("base.Personal")],e.travelType=1)})},_getDatalist:function(){var e=this;this.details={},this.datalist=[],this.currentPageIndex=1,this.tableViewOptions.pullUpLoad=!1;var t={KeyWord:this.KeyWord,OrderBusinessType:0,PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,TravelType:this.travelType};Object(g.G)(t).then(function(t){e.details=t.ResultData,e.datalist=t.ResultData.FrequentTravelers,t.ResultData.length>=e.currentPageSize&&(e.tableViewOptions.pullUpLoad={threshold:50}),e.$refs.tableView&&e.$refs.tableView.forceUpdate()})},_getDatalistMore:function(){var e=this;this.currentPageIndex++;var t={KeyWord:this.KeyWord,OrderBusinessType:0,PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,TravelType:this.travelType};Object(g.G)(t).then(function(t){e.datalist=e.datalist.concat(t.ResultData.FrequentTravelers),t.ResultData.length<e.currentPageSize?e.tableViewOptions.pullUpLoad=!1:e.tableViewOptions.pullUpLoad={threshold:50},e.$refs.tableView&&e.$refs.tableView.forceUpdate()})},_addPassenger:function(e){this.showDialog=!1,this.passengerDetails={},this.$set(this.passengerDetails,"ChName",""),this.$set(this.passengerDetails,"FirstName",""),this.$set(this.passengerDetails,"LastName",""),this.$set(this.passengerDetails,"Gender",!0),this.$set(this.passengerDetails,"Birthday",this.beTime(new Date)),this.$set(this.passengerDetails,"Email",""),this.$set(this.passengerDetails,"Mobile",""),this.$set(this.passengerDetails,"Department",null),this.$set(this.passengerDetails,"CostCenter",null),this.$set(this.passengerDetails,"BusinessUnit",null),this.$set(this.passengerDetails,"Credentials",this.details.SupportCredentialTypes.map(function(e){return{CredentialName:e.CredentialName,CredentialType:e.CredentialType,CredentialNo:"",EffectiveDate:""}})),this.$set(this.passengerDetails,"UpType",e!==this.TYPE_ADD_PERSONAL?1:2),this.$set(this.passengerDetails,"Nation",null),this.$set(this.passengerDetails,"TravelType",e!==this.TYPE_ADD_PERSONAL?0:1),this.$set(this.passengerDetails,"TravelCardList",[]),this.$set(this.passengerDetails,"DefaultCredentialType",1),this.$set(this.passengerDetails,"DefaultNameType",0),this.$refs.PassengerDetails&&this.$refs.PassengerDetails.open()},_importPassenger:function(){this.showDialog=!1,this.$refs.Person&&this.$refs.Person.open()},_gotoDetails:function(e,t){this.passengerDetails=t,this.$set(this.passengerDetails,"index",e),this.$refs.PassengerDetails&&this.$refs.PassengerDetails.open()},_setTravelType:function(e){this.travelType=e},_delegateWithPassengerDetails:function(e){var t=this,s=e;s.OrderBusinessType=0,e.index>=0?Object(g.H)(s).then(function(s){!0===s.ResultData?(t.$toast(t.$t("TM.SaveSucceed")),t.datalist.splice(e.index,1,e)):t.$toast(t.$t("TM.SaveFailed"))}):Object(g.D)(s).then(function(e){t.$toast(t.$t("TM.AddSucceed")),t._getDatalist()})},_delegateWithDeletePassenger:function(e){this.datalist.splice(e,1)}},components:{CHeader:a.a,HsCell1:i.a,HsNull:n.a,HsDialogMenu:o,HsScroll:c.a,HsSection:d.a,HsTab:u.a,PassengerDetails:p.a,Person:f}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hs-container"},[s("c-header",{attrs:{isBackNav:"",title:e.$t("base.FrequentTravelerManagement"),fixedBackPath:"/management"}},[s("div",{staticClass:"c-header-right",attrs:{slot:"right"},slot:"right"},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/header/add.png')"},on:{click:function(t){e.$refs.HsDialogMenu.open()}}})])]),e._v(" "),s("div",{staticClass:"search-bar"},[s("div",{staticClass:"bar"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.KeyWord,expression:"KeyWord",modifiers:{trim:!0}}],attrs:{maxlength:"50",placeholder:e.$t("base.PleaseEnterAKeywordToSearch")},domProps:{value:e.KeyWord},on:{input:function(t){t.target.composing||(e.KeyWord=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/search.png')"},on:{click:e._getDatalist}})])]),e._v(" "),e.userManageInfo&&0===e.userManageInfo.TravelerManageRole?s("hs-tab",{attrs:{selectedIndex:e.travelType,options:e.tabOptions},on:{select:e._setTravelType}}):e._e(),e._v(" "),s("hs-scroll",{ref:"tableView",staticClass:"table-view",style:{height:e.userManageInfo&&0===e.userManageInfo.TravelerManageRole?"calc(100% - 45px - 53px - 40px)":"calc(100% - 45px - 53px)"},attrs:{data:e.datalist,options:e.tableViewOptions},on:{"pulling-down":e._getDatalist,"pulling-up":e._getDatalistMore}},[s("ul",[s("div",{staticStyle:{width:"100%",height:"1px"}}),e._v(" "),e.datalist&&0!==e.datalist.length?e._e():s("hs-null"),e._v(" "),e._l(e.datalist,function(t,a){return s("div",{key:a,staticClass:"custom-cell-passenger"},[s("div",{staticClass:"details"},[s("div",{staticClass:"header"},[s("p",{staticClass:"name"},[e._v("\n              "+e._s(t.ChName)+"\n              "),t.LastName&&t.FirstName?[e._v(e._s(t.LastName)+" "+e._s(t.FirstName))]:e._e()],2),e._v(" "),1===t.UpType?s("div",{staticClass:"staff"},[e._v("员工")]):e._e(),e._v(" "),2===t.UpType?s("div",{staticClass:"no-staff"},[e._v("非员工")]):e._e()]),e._v(" "),t.Credentials.filter(function(e){return e.CredentialType===t.DefaultCredentialType})[0]&&t.Credentials.filter(function(e){return e.CredentialType===t.DefaultCredentialType})[0].CredentialNo?s("div",{staticClass:"item"},[s("p",[e._v("\n              "+e._s(t.Credentials.filter(function(e){return e.CredentialType===t.DefaultCredentialType})[0].CredentialName)+"\n            ")]),e._v(" "),s("p",[e._v("\n              "+e._s(t.Credentials.filter(function(e){return e.CredentialType===t.DefaultCredentialType})[0].CredentialNo)+"\n            ")])]):e._e(),e._v(" "),t.Mobile?s("div",{staticClass:"item"},[s("p",[e._v(e._s(e.$t("base.CellphoneNumber")))]),e._v(" "),s("p",[e._v(e._s(t.Mobile))])]):e._e()]),e._v(" "),s("div",{staticClass:"footer"},[s("p",{on:{click:function(s){e._gotoDetails(a,t)}}},[e._v(e._s(e.$t("base.Edit")))])])])}),e._v(" "),s("div",{staticStyle:{width:"100%",height:"10px"}})],2)]),e._v(" "),s("transition",{attrs:{name:"opacity"}},[e.showDialog?s("div",{staticClass:"dialog",on:{click:function(t){e.showDialog=!1}}},[s("div",{staticClass:"details",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"item",on:{click:function(t){e._addPassenger(0)}}},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/personal-center/passengers/add-business.png')"}}),e._v(" "),s("p",[e._v("常旅客添加(因公)")])]),e._v(" "),s("div",{staticClass:"item",on:{click:function(t){e._importPassenger()}}},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/personal-center/passengers/import-business.png')"}}),e._v(" "),s("p",[e._v("常旅客导入(因公)")])]),e._v(" "),s("div",{staticClass:"item",on:{click:function(t){e._addPassenger(2)}}},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/personal-center/passengers/add-personal.png')"}}),e._v(" "),s("p",[e._v("常旅客导入(因私)")])])])]):e._e()]),e._v(" "),s("passenger-details",{ref:"PassengerDetails",attrs:{details:e.passengerDetails,OrderBusinessType:0},on:{delegate:e._delegateWithPassengerDetails,delegateWithDelete:e._delegateWithDeletePassenger}}),e._v(" "),s("person",{ref:"Person"}),e._v(" "),s("hs-dialog-menu",{ref:"HsDialogMenu"},[s("div",{staticClass:"add-dialog",on:{click:function(t){e.$refs.HsDialogMenu.close()}}},[e.userManageInfo&&e.userManageInfo.IsAllowAddTraveler?s("div",{staticClass:"item",on:{click:function(t){e._addPassenger(0)}}},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/personal-center/passengers/add-business.png')"}}),e._v(" "),s("p",[e._v("添加(因公)")])]):e._e(),e._v(" "),!e.userManageInfo||0!==e.userManageInfo.TravelerManageRole&&1!==e.userManageInfo.TravelerManageRole?e._e():s("div",{staticClass:"item",on:{click:function(t){e._importPassenger()}}},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/personal-center/passengers/import-business.png')"}}),e._v(" "),s("p",[e._v("导入(因公)")])]),e._v(" "),!e.userManageInfo||0!==e.userManageInfo.TravelerManageRole&&2!==e.userManageInfo.TravelerManageRole?e._e():s("div",{staticClass:"item",on:{click:function(t){e._addPassenger(2)}}},[s("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/personal-center/passengers/add-personal.png')"}}),e._v(" "),s("p",[e._v("添加(因私)")])])])])],1)},staticRenderFns:[]};var D=s("VU/8")(_,m,!1,function(e){s("cb8c")},"data-v-58b71142",null);t.default=D.exports},c6Tt:function(e,t){},cb8c:function(e,t){},ewLv:function(e,t){}});
//# sourceMappingURL=7.6b74a087161cc86234d2.js.map