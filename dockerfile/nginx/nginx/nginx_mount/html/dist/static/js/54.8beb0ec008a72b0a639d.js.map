{"version":3,"sources":["webpack:///src/pages/intl-plane-ticket/order/order-list/order-list.vue","webpack:///./src/pages/intl-plane-ticket/order/order-list/order-list.vue?b74c","webpack:///./src/pages/intl-plane-ticket/order/order-list/order-list.vue"],"names":["order_list","beforeRouteEnter","to","from","next","vm","path","travelType","dataStatus","PsgName","_getDatalist","Number","$route","params","TravelType","datalist","length","activated","this","eventBus","$off","$on","bind","data","tableViewOptions","pullDownRefresh","threshold","pullUpLoad","currentPageIndex","currentPageSize","watch","val","_this","timer","clearTimeout","setTimeout","methods","_this2","StartDate","beTimeNumber","beTime","Date","setMonth","getMonth","EndDate","PageIndex","PageSize","Status","Object","api","then","res","ResultData","Orders","$refs","tableView","forceUpdate","_getDatalistMore","_this3","concat","_tabDelegate","status","_gotoDetails","ID","$router","push","query","isOwner","_submit","item","_this4","$alert","content","$t","cancelTxt","confirmFn","OrderIDs","$toast","_gotoSubmitAndPay","_this5","Pay","gotoPay","OrderBusinessType","OrderID","PayWay","CallbackPathName","_cancel","_this6","_gotoPay","_this7","components","CHeader","c_header","HsTab","hs_tab","HsScroll","hs_scroll","HsSection","hs_section","HsCell1","hs_cell_1","HsNull","hs_null","pay","order_list_order_list","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","isBackNav","title","fixedBackPath","slot","on","click","$event","style","transform","_v","_s","directives","name","rawName","value","expression","maxlength","placeholder","domProps","input","target","composing","staticStyle","background-image","selectedIndex","options","select","ref","pulling-down","pulling-up","noValue","JSON","stringify","_l","index","key","OrderDate","_e","Route","DepartureDate","FlightNo","margin-bottom","Passenger","TotalPrice","OrderStatusDesc","PageBtnInfo","stopPropagation","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/54.8beb0ec008a72b0a639d.js","sourcesContent":["<template>\n  <div class=\"hs-container\">\n    <c-header isBackNav :title=\"$t('base.IntlFlightOrder')\" fixedBackPath=\"/personal/center\">\n      <div slot=\"right\" class=\"c-header-right\">\n        <div class=\"travelTypeSwitch\" @click=\"travelType = travelType === 0 ? 1 : 0\">\n          <div :style=\"{transform: `translateX(${travelType === 0 ? '0px' : '20px'})`}\"><p>{{travelType === 0 ? $t('base.B') : $t('base.P')}}</p></div>\n        </div>\n      </div>\n    </c-header>\n    <div class=\"search-bar\">\n      <div class=\"bar\">\n        <input maxlength='50' v-model=\"PsgName\" :placeholder=\"$t('base.PleaseEnterThePassengerNameToSearch')\"/>\n        <div class=\"logo\" style=\"background-image: url('static/image/plane-ticket/book/search.png')\" @click=\"_getDatalist\"></div>\n      </div>\n    </div>\n    <hs-tab :selectedIndex=\"dataStatus\" :options=\"[$t('base.All'), $t('base.PendForOperating'), $t('base.Operating'), $t('base.Finished'), $t('base.Canceled')]\" @select=\"_tabDelegate\"></hs-tab>\n    <hs-scroll\n      class=\"table-view\"\n      ref=\"tableView\"\n      :data=\"datalist\"\n      :options=\"tableViewOptions\"\n      @pulling-down=\"_getDatalist\"\n      @pulling-up=\"_getDatalistMore\">\n      <hs-null v-if=\"noValue(JSON.stringify(datalist))\" :title=\"$t('base.AllOrdersForRecentSixMonths')\"></hs-null>\n      <ul v-else>\n        <div class=\"custom-cell\" v-for=\"(item, index) in datalist\" :key=\"index\" @click=\"_gotoDetails(item.ID)\">\n          <div class=\"header\" v-if=\"index === 0 || (index > 0 && (beTime(item.OrderDate, 'MM-dd') !== beTime(datalist[index - 1].OrderDate, 'MM-dd')))\">\n            <p>\n              {{$t('base.OrderDate')}}:\n              {{$t(beTime(item.OrderDate), 'date', beTime(item.OrderDate, 'yyyy') === beTime(new Date(), 'yyyy') ? ['MM-dd', 'MM dd'] : ['yyyy-MM-dd', 'MM dd, yyyy'])}}\n            </p>\n          </div>\n          <div class=\"content\">\n            <div class=\"information\">\n              <div class=\"left\">\n                <div class=\"logo\" :style=\"{'background-image': `url('static/image/personal-center/InterPlane.png')`}\"></div>\n              </div>\n              <div class=\"details\">\n                <div class=\"blank\">\n                  <p class=\"title\">{{item.Route}}</p>\n                  <p>{{item.DepartureDate}}</p>\n                  <div class=\"row\">\n                    <!-- <div class=\"logo\" :style=\"{'background-image': `url('${itemChild.AirLineLogoUrl}')`}\"></div> -->\n                    <p>{{item.FlightNo}}</p>\n                    <!-- <p v-if=\"itemChild.Flight\">&nbsp;|&nbsp;{{itemChild.Flight}}</p> -->\n                  </div>\n                  <p style=\"margin-bottom: 0px\">{{$t('base.FlightsPassenger')}}:&nbsp;{{item.Passenger}}</p>\n                </div>\n              </div>\n              <div class=\"right\">\n                <p class=\"price\">￥{{item.TotalPrice}}</p>\n                <p class=\"status\">{{item.OrderStatusDesc}}</p>\n              </div>\n            </div>\n            <div class=\"btns\">\n              <!-- 现付 && 未支付 && (无需审批 || 审批通过) && 预订成功\n              <p v-if=\"item.SettlementTypeName === $t('base.SettleNow') &&\n                Number(item.PayStatus) === 0 &&\n                (Number(item.OrderVettingStatus) === 0 || Number(item.OrderVettingStatus) === 5) &&\n                Number(item.OrderStatus) === 1\" @click.stop=\"_gotoPay(item)\">{{$t('base.Pay')}}</p>\n              现付 && 未支付 && (无需审批 || 审批通过) && 未提交\n              <p v-else-if=\"item.SettlementTypeName === $t('base.SettleNow') &&\n                Number(item.PayStatus) === 0 &&\n                (Number(item.OrderVettingStatus) === 0 || Number(item.OrderVettingStatus) === 5) &&\n                Number(item.OrderStatus) === 8\" @click.stop=\"_gotoSubmitAndPay(item)\">{{$t('base.SubmitAndPay')}}</p>\n              <p v-else-if=\"Number(item.OrderStatus) === 8\" @click.stop=\"_submit(item)\">{{$t('base.Submit')}}</p>\n              <p v-if=\"Number(item.OrderStatus) === 1 || Number(item.OrderStatus) === 2 || Number(item.OrderStatus) === 8\" @click.stop=\"_cancel(item)\">{{$t('base.Cancel')}}</p> -->\n              <p v-if=\"item.PageBtnInfo.IsAllowPayAndSubmit\" @click.stop=\"_gotoSubmitAndPay(item)\">{{$t('base.SubmitAndPay')}}</p>\n              <p v-if=\"item.PageBtnInfo.IsAllowSubmit\" @click.stop=\"_submit(item)\">{{$t('base.Submit')}}</p>\n              <p v-if=\"item.PageBtnInfo.IsAllowPay\" @click.stop=\"_gotoPay(item)\">{{$t('base.Pay')}}</p>\n              <p v-if=\"item.PageBtnInfo.IsAllowCancel\" @click.stop=\"_cancel(item)\">{{$t('base.CancelOrder')}}</p>\n            </div>\n          </div>\n        </div>\n        <p class=\"allLoadedTxt\" v-if=\"!tableViewOptions.pullUpLoad\">{{$t('base.AllOrdersForRecentSixMonths')}}</p>\n      </ul>\n    </hs-scroll>\n    <pay ref=\"Pay\"></pay>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\n// 机票订单列表\nimport CHeader from 'components/c-header/c-header'\nimport HsTab from 'base/hs-tab/hs-tab'\nimport HsScroll from 'base/hs-scroll/hs-scroll'\nimport HsSection from 'base/hs-tableview/hs-section/hs-section'\nimport HsCell1 from 'base/hs-tableview/hs-cell-1/hs-cell-1'\nimport HsNull from 'base/hs-null/hs-null'\nimport Pay from 'pages/pay/pay'\nimport eventBus from 'common/js/eventBus.js'\nimport {kpiIntlflightOrderlist, kpiIntlflightConfirmIntlOrder, kpiIntlflightCancelOrder} from 'api'\nexport default {\n  beforeRouteEnter(to, from, next) {\n    // console.log('订单列表from: ', from)\n    next(vm => {\n      if (from.path === '/' || from.path === '/personal/center') {\n        vm.travelType = 0\n        vm.dataStatus = 0\n        vm.PsgName === '' ? vm._getDatalist() : (vm.PsgName = '')\n      } else if (from.path === '/intlPlaneTicket/orderConfirm' || from.path === '/intlPlaneTicket/bookDetails') {\n        vm.travelType = Number(vm.$route.params.TravelType) === 1 ? 1 : 0\n        vm._getDatalist()\n      } else if (!vm.datalist || vm.datalist.length === 0) {\n        vm._getDatalist()\n      }\n    })\n  },\n  activated() {\n    if (Number(this.$route.params.TravelType) === 1) {\n      this.travelType = 1\n    } else if (Number(this.$route.params.TravelType) === 0) {\n      this.travelType = 0\n    }\n    eventBus.$off('refresh')\n    eventBus.$on('refresh', function () {\n      this._getDatalist()\n    }.bind(this))\n  },\n  data() {\n    return {\n      tableViewOptions: {\n        pullDownRefresh: {\n          threshold: 50\n        },\n        pullUpLoad: false\n      },\n      datalist: [],\n      dataStatus: 0,\n      currentPageIndex: 1,\n      currentPageSize: 10,\n      travelType: 0,\n      PsgName: ''\n    }\n  },\n  watch: {\n    travelType() {\n      this._getDatalist()\n    },\n    PsgName(val) {\n      this.timer && clearTimeout(this.timer) // eslint-disable-line\n      this.timer = setTimeout(() => {\n        this._getDatalist()\n      }, 1000)\n    }\n  },\n  methods: {\n    /** 获取订单列表 */\n    _getDatalist() {\n      this.datalist = []\n      this.currentPageIndex = 1\n      this.tableViewOptions.pullUpLoad = false\n      let params = {\n        StartDate: this.beTimeNumber(this.beTime(new Date().setMonth(new Date().getMonth() - 6))),\n        EndDate: this.beTimeNumber(this.beTime(new Date())),\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        Status: this.dataStatus,\n        TravelType: this.travelType,\n        PsgName: this.PsgName\n      }\n      kpiIntlflightOrderlist(params).then((res) => {\n        console.log('机票订单列表: ', res)\n        this.datalist = res.ResultData.Orders\n        if (res.ResultData.Orders.length >= this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    /** 获取更多订单列表 */\n    _getDatalistMore() {\n      this.currentPageIndex++\n      let params = {\n        StartDate: this.beTimeNumber(this.beTime(new Date().setMonth(new Date().getMonth() - 6))),\n        EndDate: this.beTimeNumber(this.beTime(new Date())),\n        PageIndex: this.currentPageIndex,\n        PageSize: this.currentPageSize,\n        Status: this.dataStatus,\n        TravelType: this.travelType,\n        PsgName: this.PsgName\n      }\n      kpiIntlflightOrderlist(params, true).then((res) => {\n        console.log('机票订单列表: ', res)\n        this.datalist = this.datalist.concat(res.ResultData.Orders)\n        if (res.ResultData.Orders.length < this.currentPageSize) {\n          this.tableViewOptions.pullUpLoad = false\n        } else {\n          this.tableViewOptions.pullUpLoad = {threshold: 50}\n        }\n        this.$refs.tableView && this.$refs.tableView.forceUpdate()\n      })\n    },\n    /** tab回调 */\n    _tabDelegate(status) {\n      if (this.dataStatus !== status) {\n        this.dataStatus = status\n        this._getDatalist()\n      }\n    },\n    /** 去往详情页面 */\n    _gotoDetails(ID) {\n      this.$router.push({path: '/intlPlaneTicket/orderDetails', query: {ID: ID, isOwner: true}})\n    },\n    /** 提交 */\n    _submit(item) {\n      this.$alert({\n        content: this.$t('TM.AreYouSureToSubmitYourOrder'),\n        cancelTxt: this.$t('base.Cancel'),\n        confirmFn: () => {\n          let params = {\n            OrderIDs: [item.ID]\n          }\n          kpiIntlflightConfirmIntlOrder(params).then((res) => {\n            if (res.ResultData === true) {\n              this.$toast(this.$t('TM.SubmitSucceed'))\n              this._getDatalist()\n            } else {\n              this.$toast(this.$t('TM.TheSubmissionFailedPleaseTryAgainLater'))\n            }\n          })\n        }\n      })\n    },\n    /** 提交并支付 */\n    _gotoSubmitAndPay(item) {\n      this.$alert({\n        content: this.$t('TM.AreYouSureToSubmitAndPayForTheOrder'),\n        cancelTxt: this.$t('base.Cancel'),\n        confirmFn: () => {\n          let params = {\n            OrderIDs: [item.ID]\n          }\n          kpiIntlflightConfirmIntlOrder(params).then((res) => {\n            if (res.ResultData === true) {\n              this.$refs.Pay && this.$refs.Pay.gotoPay({\n                OrderBusinessType: 6,\n                OrderID: item.ID,\n                PayWay: 3,\n                TravelType: Number(this.TravelType),\n                CallbackPathName: 'planeTicketOrderList'\n              })\n            } else {\n              this.$toast(this.$t('TM.TheSubmissionFailedPleaseTryAgainLater'))\n            }\n          })\n        }\n      })\n    },\n    /** 取消 */\n    _cancel(item) {\n      this.$alert({\n        content: this.$t('TM.AreYouSureToCancelTheOrder'),\n        cancelTxt: this.$t('base.Cancel'),\n        confirmFn: () => {\n          let params = {\n            OrderID: item.ID\n          }\n          kpiIntlflightCancelOrder(params).then((res) => {\n            if (res.ResultData === true) {\n              this.$toast(this.$t('TM.OrderCancelled'))\n              this._getDatalist()\n            } else {\n              this.$toast(this.$t('TM.OrderCancelFailed'))\n            }\n          })\n        }\n      })\n    },\n    /** 支付 */\n    _gotoPay(item) {\n      this.$alert({\n        content: this.$t('TM.AreYouSureToPayForThisOrder'),\n        cancelTxt: this.$t('base.Cancel'),\n        confirmFn: () => {\n          this.$refs.Pay && this.$refs.Pay.gotoPay({\n            OrderBusinessType: 6,\n            OrderID: item.ID,\n            PayWay: 3,\n            TravelType: Number(this.TravelType),\n            CallbackPathName: 'planeTicketOrderList'\n          })\n        }\n      })\n    }\n  },\n  components: {\n    CHeader,\n    HsTab,\n    HsScroll,\n    HsSection,\n    HsCell1,\n    HsNull,\n    Pay\n  }\n}\n</script>\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n@import '~common/stylus/base'\n@import '~common/stylus/variable'\n@import '~common/stylus/mixin'\n.hs-container\n  width 100%\n  height 100%\n  .c-header-right\n    @extend .flex-row\n    @extend .flex-end\n    width 100%\n    >.travelTypeSwitch\n      @extend .flex-row\n      @extend .flex-start\n      width 50px\n      height 30px\n      border 1px solid $color_theme\n      background-color $color_theme\n      border-radius 15px\n      // position absolute\n      // top 7px\n      // right 10px\n      >div\n        @extend .flex-center\n        width 28px\n        height 28px\n        border-radius 15px\n        background-color $color_white\n        transition all 400ms\n        >p\n          font-size 0.8rem\n          color $color_theme\n  >.search-bar\n    @extend .flex-center\n    width 100%\n    padding 5px 15px\n    background-color $color_white\n    >.bar\n      @extend .flex-row\n      @extend .flex-between\n      width 100%\n      border-radius 4px\n      border 1px solid $color_gray_layer\n      padding 10px\n      background-color $color_white\n      font-size 0.9rem\n      >input\n        width calc(100% - 30px)\n        height 100%\n      >.logo\n        width 20px\n        height 20px\n        background-size 100% 100%\n  >.table-view\n    width 100%\n    height calc(100% - 45px - 52px - 40px)\n    overflow hidden\n    .custom-cell\n      width 100%\n      padding 15px 10px\n      padding-bottom 0px\n      >.header\n        @extend .flex-row\n        @extend .flex-start\n        width 100%\n        margin-bottom 10px\n        >p\n          @extend .flex-center\n          background-color $color_red_background_1\n          color $color_white\n          font-size 0.8rem\n          line-height 20px\n          border-radius 10px\n          padding 0 10px\n          margin-right 10px\n        >.change\n          background-color $color_orange_text\n      >.content\n        width 100%\n        background-color $color_white\n        border-radius 3px\n        padding 10px\n        box-shadow 0 0 10px $color_gray_layer\n        >.information\n          @extend .flex-row\n          @extend .flex-start\n          @extend .flex-top\n          width 100%\n          >.left\n            width 30px\n            padding 10px 0\n            >.logo\n              width 20px\n              height 20px\n              background-size 100% 100%\n          >.details\n            width calc(100% - 105px)\n            margin-right 5px\n            >.blank\n              width 100%\n              padding 10px 0\n              >.title\n                @extend .flex-row\n                @extend .flex-start\n                width 100%\n                line-height 20px\n                font-size 1.1rem\n                color $color_black_text_0\n                font-weight bold\n                margin-bottom 12px\n                text-align justify\n              >p\n                width 100%\n                font-size 0.9rem\n                color $color_black_text_1\n                margin-bottom 10px\n                line-height 1.2em\n              >.row\n                @extend .flex-row\n                @extend .flex-start\n                width 100%\n                margin-bottom 10px\n                >.logo\n                  width 15px\n                  height 15px\n                  background-size 100% 100%\n                  margin-right 5px\n                >p\n                  width 100%\n                  font-size 0.9rem\n                  color $color_black_text_1\n                  line-height 1.2em\n                  word-wrap break-word\n          >.right\n            @extend .flex-column\n            @extend .flex-bottom\n            width 70px\n            padding 10px 0\n            >.price\n              @extend .flex-row\n              @extend .flex-end\n              line-height 20px\n              font-size 1rem\n              font-weight bold\n              color $color_theme\n              margin-bottom 10px\n            >.status\n              font-size 0.7rem\n              color $color_orange_text\n        >.btns\n          @extend .flex-row\n          @extend .flex-end\n          width 100%\n          >p\n            @extend .flex-center\n            color $color_black_text_1\n            height 30px\n            border-radius 15px\n            padding 0 15px\n            background-color $color_gray_background_0\n            font-size 0.9rem\n            margin-left 10px\n    .allLoadedTxt\n      @extend .flex-center\n      width 100%\n      height 40px\n      font-size 0.8rem\n      color $color_black_text_1\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/intl-plane-ticket/order/order-list/order-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hs-container\"},[_c('c-header',{attrs:{\"isBackNav\":\"\",\"title\":_vm.$t('base.IntlFlightOrder'),\"fixedBackPath\":\"/personal/center\"}},[_c('div',{staticClass:\"c-header-right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"travelTypeSwitch\",on:{\"click\":function($event){_vm.travelType = _vm.travelType === 0 ? 1 : 0}}},[_c('div',{style:({transform: (\"translateX(\" + (_vm.travelType === 0 ? '0px' : '20px') + \")\")})},[_c('p',[_vm._v(_vm._s(_vm.travelType === 0 ? _vm.$t('base.B') : _vm.$t('base.P')))])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"search-bar\"},[_c('div',{staticClass:\"bar\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.PsgName),expression:\"PsgName\"}],attrs:{\"maxlength\":\"50\",\"placeholder\":_vm.$t('base.PleaseEnterThePassengerNameToSearch')},domProps:{\"value\":(_vm.PsgName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.PsgName=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"logo\",staticStyle:{\"background-image\":\"url('static/image/plane-ticket/book/search.png')\"},on:{\"click\":_vm._getDatalist}})])]),_vm._v(\" \"),_c('hs-tab',{attrs:{\"selectedIndex\":_vm.dataStatus,\"options\":[_vm.$t('base.All'), _vm.$t('base.PendForOperating'), _vm.$t('base.Operating'), _vm.$t('base.Finished'), _vm.$t('base.Canceled')]},on:{\"select\":_vm._tabDelegate}}),_vm._v(\" \"),_c('hs-scroll',{ref:\"tableView\",staticClass:\"table-view\",attrs:{\"data\":_vm.datalist,\"options\":_vm.tableViewOptions},on:{\"pulling-down\":_vm._getDatalist,\"pulling-up\":_vm._getDatalistMore}},[(_vm.noValue(JSON.stringify(_vm.datalist)))?_c('hs-null',{attrs:{\"title\":_vm.$t('base.AllOrdersForRecentSixMonths')}}):_c('ul',[_vm._l((_vm.datalist),function(item,index){return _c('div',{key:index,staticClass:\"custom-cell\",on:{\"click\":function($event){_vm._gotoDetails(item.ID)}}},[(index === 0 || (index > 0 && (_vm.beTime(item.OrderDate, 'MM-dd') !== _vm.beTime(_vm.datalist[index - 1].OrderDate, 'MM-dd'))))?_c('div',{staticClass:\"header\"},[_c('p',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('base.OrderDate'))+\":\\n            \"+_vm._s(_vm.$t(_vm.beTime(item.OrderDate), 'date', _vm.beTime(item.OrderDate, 'yyyy') === _vm.beTime(new Date(), 'yyyy') ? ['MM-dd', 'MM dd'] : ['yyyy-MM-dd', 'MM dd, yyyy']))+\"\\n          \")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"information\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"logo\",style:({'background-image': \"url('static/image/personal-center/InterPlane.png')\"})})]),_vm._v(\" \"),_c('div',{staticClass:\"details\"},[_c('div',{staticClass:\"blank\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.Route))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.DepartureDate))]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('p',[_vm._v(_vm._s(item.FlightNo))])]),_vm._v(\" \"),_c('p',{staticStyle:{\"margin-bottom\":\"0px\"}},[_vm._v(_vm._s(_vm.$t('base.FlightsPassenger'))+\": \"+_vm._s(item.Passenger))])])]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('p',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(item.TotalPrice))]),_vm._v(\" \"),_c('p',{staticClass:\"status\"},[_vm._v(_vm._s(item.OrderStatusDesc))])])]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[(item.PageBtnInfo.IsAllowPayAndSubmit)?_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm._gotoSubmitAndPay(item)}}},[_vm._v(_vm._s(_vm.$t('base.SubmitAndPay')))]):_vm._e(),_vm._v(\" \"),(item.PageBtnInfo.IsAllowSubmit)?_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm._submit(item)}}},[_vm._v(_vm._s(_vm.$t('base.Submit')))]):_vm._e(),_vm._v(\" \"),(item.PageBtnInfo.IsAllowPay)?_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm._gotoPay(item)}}},[_vm._v(_vm._s(_vm.$t('base.Pay')))]):_vm._e(),_vm._v(\" \"),(item.PageBtnInfo.IsAllowCancel)?_c('p',{on:{\"click\":function($event){$event.stopPropagation();_vm._cancel(item)}}},[_vm._v(_vm._s(_vm.$t('base.CancelOrder')))]):_vm._e()])])])}),_vm._v(\" \"),(!_vm.tableViewOptions.pullUpLoad)?_c('p',{staticClass:\"allLoadedTxt\"},[_vm._v(_vm._s(_vm.$t('base.AllOrdersForRecentSixMonths')))]):_vm._e()],2)],1),_vm._v(\" \"),_c('pay',{ref:\"Pay\"})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3929bee2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/intl-plane-ticket/order/order-list/order-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3929bee2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./order-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./order-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./order-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3929bee2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./order-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3929bee2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/intl-plane-ticket/order/order-list/order-list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}