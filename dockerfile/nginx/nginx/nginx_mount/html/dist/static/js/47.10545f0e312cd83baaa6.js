webpackJsonp([47],{aLcp:function(t,e){},mX9g:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("CCVD"),s=a("vgdM"),n=a("C0NF"),r=a("9Vmw"),l=a("4aFc"),o=a("gyMJ"),c={created:function(){this._getDatalist()},data:function(){return{tableViewOptions:{pullDownRefresh:{threshold:50}},datalist:[],currentPageIndex:1,currentPageSize:20,travelType:0,KeyWord:"",frequentContacts:[]}},watch:{KeyWord:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e._getDatalist()},1e3)}},methods:{_getFrequentContacts:function(){var t=this;Object(o._53)().then(function(e){t.frequentContacts=e.ResultData})},_getDatalist:function(){var t=this;this._getFrequentContacts(),this.currentPageIndex=1,this.tableViewOptions.pullUpLoad=!1;var e={KeyWord:this.KeyWord,PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,TravelType:this.travelType,ImportType:0};Object(o._50)(e).then(function(e){var a=e.ResultData;t.datalist=a,e.ResultData.length>=t.currentPageSize&&(t.tableViewOptions.pullUpLoad={threshold:50}),t.$refs.tableView&&t.$refs.tableView.forceUpdate()})},_getDatalistMore:function(){var t=this;this.currentPageIndex++;var e={KeyWord:this.KeyWord,PageIndex:this.currentPageIndex,PageSize:this.currentPageSize,TravelType:this.travelType,ImportType:0};Object(o._50)(e).then(function(e){var a=e.ResultData;t.datalist=t.datalist.concat(a),e.ResultData.length<t.currentPageSize?t.tableViewOptions.pullUpLoad=!1:t.tableViewOptions.pullUpLoad={threshold:50},t.$refs.tableView&&t.$refs.tableView.forceUpdate()})},_toggleWithDatalist:function(t){var e=this,a={contactUpID:this.datalist[t].ID,Name:this.datalist[t].Name,Mobile:this.datalist[t].Mobile,Email:this.datalist[t].Email};Object(o._46)(a).then(function(t){t.ResultData?e._getFrequentContacts():e.$toast(e.$t("TM.AddFailed"))})},_existence:function(t){return this.frequentContacts.map(function(t){return t.ContactUpID}).indexOf(t)>=0}},components:{CHeader:i.a,HsButton:s.a,HsScroll:n.a,HsSection:r.a,HsCell1:l.a}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hs-container"},[a("c-header",{attrs:{isBackNav:"",title:t.$t("base.ImportFromFrequentTraveler"),fixedBackPath:"/personal/frequentContacts"}}),t._v(" "),a("div",{staticClass:"search-bar"},[a("div",{staticClass:"bar"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.KeyWord,expression:"KeyWord",modifiers:{trim:!0}}],attrs:{maxlength:"50",placeholder:t.$t("base.PleaseEnterAKeywordToSearch")},domProps:{value:t.KeyWord},on:{input:function(e){e.target.composing||(t.KeyWord=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("div",{staticClass:"logo",staticStyle:{"background-image":"url('static/image/plane-ticket/book/search.png')"},on:{click:t._getDatalist}})])]),t._v(" "),a("hs-scroll",{ref:"tableView",staticClass:"table-view",attrs:{data:t.datalist,options:t.tableViewOptions},on:{"pulling-down":t._getDatalist,"pulling-up":t._getDatalistMore}},[a("ul",[a("hs-section",t._l(t.datalist,function(e,i){return a("hs-cell-1",{key:"passengerselect"+i,attrs:{showLogo:!1}},[a("div",{staticClass:"custom-cell-contact"},[a("div",{staticClass:"details"},[a("div",{staticClass:"item"},[a("p",{staticClass:"name"},[t._v(t._s(e.Name))])]),t._v(" "),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("base.CellphoneNumber")))]),t._v(" "),a("p",[t._v(t._s(e.Mobile?e.Mobile:t.$t("base.Unfilled")))])]),t._v(" "),a("div",{staticClass:"item"},[a("p",[t._v(t._s(t.$t("base.Email")))]),t._v(" "),a("p",[t._v(t._s(e.Email?e.Email:t.$t("base.Unfilled")))])])]),t._v(" "),t._existence(e.ID)?t._e():a("hs-button",{attrs:{fontSize:"0.9rem"},on:{click:function(e){t._toggleWithDatalist(i)}}},[t._v(t._s(t.$t("base.Add")))])],1)])}))],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("aLcp")},"data-v-5928ea5b",null);e.default=d.exports}});
//# sourceMappingURL=47.10545f0e312cd83baaa6.js.map